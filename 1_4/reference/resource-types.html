<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.6">
<meta name="Forrest-skin-name" content="pelt">
<title>Resource Types</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://lenya.apache.org/">lenya</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="Lenya" src="../../images/apache-lenya-light.png" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href=""></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="lenya.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with :');" value="Search the site with :" size="25" name="q" id="query" type="text">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="base-not-selected" href="../../index.html">Project</a>
</li>
<li class="current">
<a class="base-selected" href="../../1_4/index.html">Version 1.4</a>
</li>
<li>
<a class="base-not-selected" href="../../1_2_x/index.html">Version 1.2</a>
</li>
<li>
<a class="base-not-selected" href="../../community/index.html">Community</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript" language="JavaScript"><!--
              document.write("Published: " + document.lastModified);
              //  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Version 1.4</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a title="" href="../../1_4/index.html">Index</a>
</div>
<div onclick="SwitchMenu('menu_1.1.2', '../../skin/')" id="menu_1.1.2Title" class="menutitle">Installation</div>
<div id="menu_1.1.2" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../1_4/installation/index.html">Download</a>
</div>
<div class="menuitem">
<a title="" href="../../1_4/installation/subversion.html">Subversion Access</a>
</div>
<div class="menuitem">
<a title="" href="../../1_4/installation/source_version.html">Install Instructions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.3', '../../skin/')" id="menu_1.1.3Title" class="menutitle">Concepts</div>
<div id="menu_1.1.3" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../1_4/concepts/publication.html">Publication</a>
</div>
<div class="menuitem">
<a title="" href="../../1_4/concepts/authoring_live.html">Authoring and Live mode</a>
</div>
<div class="menuitem">
<a title="" href="../../1_4/concepts/wysiwyg.html">WYSIWYG</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.4', '../../skin/')" id="menu_selected_1.1.4Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Technical Reference</div>
<div id="menu_selected_1.1.4" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a title="" href="../../1_4/reference/lenya-sitemaps.html">Overview of Lenya Sitemaps</a>
</div>
<div onclick="SwitchMenu('menu_1.1.4.2', '../../skin/')" id="menu_1.1.4.2Title" class="menutitle">Usecase Framework</div>
<div id="menu_1.1.4.2" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../1_4/reference/usecase-framework/index.html">Overview</a>
</div>
<div class="menuitem">
<a title="" href="../../1_4/reference/usecase-framework/abstractusecase.html">AbstractUsecase</a>
</div>
</div>
<div class="menuitem">
<a title="" href="../../1_4/reference/publication-templating/index.html">Publication Templating</a>
</div>
<div class="menupage">
<div class="menupagetitle">Resource Types</div>
<div class="menupageitemgroup">
<div class="menupageitem">
<a href="#Introduction">Introduction</a>
</div>
<div class="menupageitem">
<a title="Configuring Resource Types" href="#Configuring+Resource+Types">Configuring Resourc...</a>
</div>
<div class="menupageitem">
<a title="Adding Resource Types to a Publication" href="#Adding+Resource+Types+to+a+Publication">Adding Resource Typ...</a>
</div>
</div>
</div>
</div>
<div class="menuitem">
<a title="" href="../../../apidocs/1.4/index.html">1.4 API (Javadoc)</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div id="skinconf-txtlink"></div>
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="resource-types.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Resource Types</h1>
	  

<a name="N1000D"></a><a name="Introduction"></a>
<h2 class="h3">Introduction</h2>
<div class="section">
<p>
	A resource type defines a certain XML source format, together with processing options.
	It typically consists of
	</p>
<ul>
	  
<li>an XML structure definition (e.g., Relax NG)</li>
	  
<li>some presentation pipelines,</li>
	  
<li>some presentation XSLT stylesheets,</li>
	  
<li>usecases to manipulate documents.</li>
	
</ul>
<p>
	  All of these can be shared between several resource types.
	</p>
</div>


<a name="N10029"></a><a name="Configuring+Resource+Types"></a>
<h2 class="h3">Configuring Resource Types</h2>
<div class="section">
<p>
    The configuration files of a resource type are stored in a single directory:
  </p>
<pre class="code">
doctypes/
    mydoctype/
        doctype.xconf                configuration file
        samples/
            mydoctype.xml            sample file
</pre>
<p>
    The schema definition file is stored in the common <span class="codefrag">resources</span> directory.
    This allows to share schemas between multiple resource types:
  </p>
<pre class="code">
resources/
    schemas/
        mydoctype.rng
</pre>
<p>
    Some resource types are provided by the Lenya core:
  </p>
<pre class="code">$LENYA_HOME
    lenya/
        doctypes/
            xhtml/...
            links/...
        resources/
            schemas/
                xhtml.rng
                links.rng
                ...
</pre>
<p>
    To add custom usecases to your publication, use the following directory structure:
  </p>
<pre class="code">$PUB_HOME
    lenya/
        doctypes/
            mydoctype1/...
            mydoctype2/...
            ...
        resources/
            schemas/
                mydoctyep1.rng
                mydoctype2.rng
                ...
</pre>
</div>


<a name="N1004F"></a><a name="Adding+Resource+Types+to+a+Publication"></a>
<h2 class="h3">Adding Resource Types to a Publication</h2>
<div class="section">
<p>
    The resource types used by a publication are declared in <span class="codefrag">publication.xconf</span>,
    including the assignment of a workflow schema to a resource type:
  </p>
<pre class="code">&lt;publication&gt;
  ...
  &lt;resource-type name="xhtml" workflow="workflow.xml"/&gt;
  &lt;resource-type name="homepage" workflow="workflow.xml"/&gt;
  &lt;resource-type name="links" workflow="workflow.xml"/&gt;
  ...
&lt;/publication&gt;
</pre>
<p>
    You can add references to
  </p>
<ul>
    
<li>core resource types,</li>
    
<li>resource types of template publications, or</li>
    
<li>resource types of the publication itself.</li>
  
</ul>
<p>
    Adding a custom resource type to your publication includes the following steps:
  </p>
<a name="N10071"></a><a name="Choose+a+Unique+Resource+Type+Name"></a>
<h3 class="h4">Choose a Unique Resource Type Name</h3>
<p>
    You should choose a reasonable name for your resource type.
    In the examples, we use <em>profile</em> (page with information about a person).
  </p>
<a name="N1007D"></a><a name="Providing+a+Sample+XML+Document"></a>
<h3 class="h4">Providing a Sample XML Document</h3>
<p>
      If you want to enable users to create new resources belonging to
      your resource type, it is useful to provide a sample XML document.
      If you want to use the <span class="codefrag">DefaultBranchCreator</span> that ships
      with Lenya, you have to add the sample document because it is used
      as a template for creating new resources.
    </p>
<p>
      The sample document is placed in
      <span class="codefrag">{publication}/lenya/doctypes/{resource-type-name}/samples/</span>.
      You can choose an arbitrary filename, but it is recommended to
      use the resource type name (e.g., <span class="codefrag">profile.xml</span>).
    </p>
<a name="N10092"></a><a name="Providing+an+XML+Structure+Definition"></a>
<h3 class="h4">Providing an XML Structure Definition</h3>
<p>
      This step is only needed if you want to edit resources with Lenya
      or validate them after they have been imported or manipulated.
      The type of the structure definition
      (<a href="http://www.w3.org/XML/Schema">XML Schema</a>,
      <a href="http://www.relaxng.org/">Relax NG</a>, ...)
      depends on the editor or validator you want to use. For instance,
      the <a href="http://www.bitfluxeditor.org/">BXE</a> WYSIWYG
      editor requires a Relax NG document.
    </p>
<p>The structure definition document is placed in the directory
      <span class="codefrag">{publication}/lenya/resources/schemas/</span>. The name
      of the file is arbitrary, but it is recommended to use the
      resource type name (e.g., <span class="codefrag">profile.rng</span>).
    </p>
<a name="N100B0"></a><a name="Creating+a+Workflow+Schema"></a>
<h3 class="h4">Creating a Workflow Schema</h3>
<p>
      If your resources should have a workflow, you have to add a workflow
      schema for your resource type as described in
      <a href="../../1_2_x/components/workflow/configuration.html">Workflow Configuration</a>.
      A workflow schema can be shared between multiple resource types.
      The workflow schema is assigned to a resource type in <span class="codefrag">publication.xconf</span>
      (see section <em>Adding Resource Types to a Publication</em>).
    </p>
<a name="N100C3"></a><a name="The+Resource+Type+Definition"></a>
<h3 class="h4">The Resource Type Definition</h3>
<p>
    To assign the creator, schema etc. to your resource type,
	  declare it in <span class="codefrag">{publication}/lenya/doctypes/{resource-type-name}/doctype.xconf</span>:
	  </p>
<pre class="code">&lt;resource-type name="profile"&gt;
  &lt;creator src="org.apache.lenya.cms.authoring.DefaultBranchCreator"&gt;
    &lt;sample-name&gt;profile.xml&lt;/sample-name&gt;
  &lt;/creator&gt;
  &lt;schema src="profile.rng"/&gt;
&lt;/resource-type</pre>
<a name="N100D3"></a><a name="Define+a+Custom+Menubar"></a>
<h3 class="h4">Define a Custom Menubar</h3>
<p>
      If you want to use a custom menubar for your resource type,
      follow the guidelines on the page
      <a href="../../1_2_x/components/layout/lenya-menubar.html">The Lenya Menubar</a>.
      Typically, a menubar is shared between multiple resource types.
      Small customizations can be achieved with Java code in the menubar XSP.
    </p>
<p>
      To let the user create new resources using the <span class="codefrag">DefaultBranchCreator</span>,
      you have to add the following menu item:
    </p>
<pre class="code">&lt;item uc:usecase="site.create" href="?doctype=profile"&gt;&lt;i18n:text&gt;New Profile Document&lt;/i18n:text&gt;&lt;/item&gt;
</pre>
<a name="N100EA"></a><a name="Presentation"></a>
<h3 class="h4">Presentation</h3>
<p>
      To make your resources available as HTTP pages, you have to add the
      appropriate pipelines and XSLT stylesheets. In general, there are no
      restrictions.
    </p>
<p>
      If you derive your publication from the default publication,
      the pipelines have to be placed in
      <span class="codefrag">{publication}/doctypes.xmap</span>. The stylesheets are located in
      <span class="codefrag">{publication}/xslt/</span> and are named <span class="codefrag">{resource-type}2xhtml.xsl</span>
      (e.g., <span class="codefrag">profile2xhtml.xsl</span>). The stylesheet is supposed to generate
      a valid XHTML fragment (in the XHTML namespace) with <span class="codefrag">&lt;div id="body"&gt;</span>
      as the document element.
    </p>
</div>

	
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
 Copyright &copy; 2002-2005 The Apache Software Foundation.</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:dev@lenya.apache.org?subject=Feedback%C2%A0for%C2%A01_4/reference/resource-types.html">dev@lenya.apache.org</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
