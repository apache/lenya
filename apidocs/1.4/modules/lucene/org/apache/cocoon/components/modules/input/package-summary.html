<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_06) on Tue Nov 14 16:05:03 CET 2006 -->
<TITLE>
org.apache.cocoon.components.modules.input (Apache Lenya API - Version 1.4-dev)
</TITLE>

<META NAME="keywords" CONTENT="org.apache.cocoon.components.modules.input package">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../javadoc.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="org.apache.cocoon.components.modules.input (Apache Lenya API - Version 1.4-dev)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/cocoon/components/search/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/cocoon/components/modules/input/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package org.apache.cocoon.components.modules.input
</H2>
InputModules

Introduction

Input modules are generic components that let one map a key to one or more
values.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../../org/apache/cocoon/components/modules/input/IndexPathModule.html" title="class in org.apache.cocoon.components.modules.input">IndexPathModule</A></B></TD>
<TD>This module returns the directory path of a search index given by its id,
 which normally is "pubid-area".</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package org.apache.cocoon.components.modules.input Description
</H2>

<P>
<h1>InputModules</h1>

<h2>Introduction</h2>
<p>
Input modules are generic components that let one map a key to one or more
values.  In concept and API, input modules are closest to the <a
    href="http://java.sun.com/j2se/1.4/docs/api/java/util/Properties.html">java.util.Properties</a>
class. An input module has a number of named attributes, each of which has an
associated value or values, which will be computed or looked up when requested.
</p>
<pre>
    |       InputModule          |
    |----------------------------|
    | PropName   | PropValue(s)  |
    |----------------------------|
    | prop1      | value1        |
    | prop2      | value2        |
    | ...        | ...           |
    | propn      | valuen        |
    +----------------------------+
</pre>
<p>Three operations are defined by the <a
    href="InputModule.html">InputModule</a> interface:</p>
<dl>
    <dt>getAttributeNames</dt>
    <dd>Retrieve a list of all available attributes (the set <i>prop1, prop2, ..., propn</i>).</dd>
    <dt>getAttribute</dt>
    <dd>
    Retrieve the value of an attribute.  For instance,
    <code>getAttribute(<i>prop1</i>)</code> would return <i>value1</i>
    </dd>
    <dt>GetAttributeValues</dt>
    <dd>Retrieve an Iterator for a list of values for an attribute.</dd>
</dl>

<h2>Usage</h2>
<p>
Input modules are used in various places in Cocoon, notably from within the
sitemap, XSPs, and matchers.</p>
<p>
In the sitemap, input modules are made available
through a {modulename:attributename} syntax.  For instance, if a <a
    href="RequestParameterModule.html">RequestParameterModule</a> named
<code>request-param</code> is defined in cocoon.xconf, then
<code>{request-param:user}</code> will in effect be replaced by the value of
the <code>user</code> request parameter (e.g. index.html?user=joe).  Similarly,
a <a href="SystemPropertyModule.html">SystemPropertyModule</a> named
<code>system-property</code> would allow
<code>{system-property:user.home}</code> to represent user's home directory
path.
</p>

<h2>Configuration</h2>
<p>
Input modules are declared in cocoon.xconf.  There is a section dedicated to
input modules:</p>
<pre>
  &lt;input-modules>
    &lt;component-instance name="global"
             class="org.apache.cocoon.components.modules.input.GlobalInputModule"
             logger="core.modules.input"/>
    &lt;component-instance name="request"
             class="org.apache.cocoon.components.modules.input.RequestModule"
             logger="core.modules.input"/>
    &lt;component-instance name="session"
             class="org.apache.cocoon.components.modules.input.SessionModule"
             logger="core.modules.input"/>
    &lt;component-instance name="request-param"
             class="org.apache.cocoon.components.modules.input.RequestParameterModule"
             logger="core.modules.input"/>
    ...
    &lt;component-instance name="defaults"
             class="org.apache.cocoon.components.modules.input.DefaultsModule"
             logger="core.modules.input">
      &lt;values>
        &lt;skin>defaultSkin&lt;/skin>
        &lt;base-url>http://localhost:8080/cocoon&lt;/base-url>
      &lt;/values>
    &lt;/component-instance>
  &lt;input-modules>
</pre>
<h3>Static/dynamic configuration</h3>
<p>
In cocoon.xconf, each input module can take a <em>static</em> configuration.
This is made available to the class via the <code>configure()</code> method,
called once on startup.  In the example above, an Avalon
<code>Configuration</code> object representing the &lt;values> node will be
passed to the DefaultsModule.
</p>
<p>
In addition, every time an input module is used, a <em>dynamic</em>
configuration is passed to it, as well as the current "object model".  You can
see these in the <a href="InputModule.html">InputModule</a> interface
definition for all three methods.  This dynamic, per-request configuration will
usually <strong>override</strong> the static configuration.  This dual
static/dynamic configuration makes input modules useful in a wide variety of
circumstances.
</p>
  

<h2>Meta Modules</h2>
<p>
So-called "meta" modules are modules that act on other modules. The simplest
example of a meta module is the <a
href="SimpleMappingMetaModule.html">SimpleMappingMetaModule</a>, which will
query another module with a modified version of an attribute name.  For
instance, if configured with:</p>
<pre>
&lt;component-instance name="mappingmodule"
    class="org.apache.cocoon.components.modules.input.SimpleMappingMetaModule"
    logger="core.modules.mapper">
  &lt;input-module name="xmlmodule"/>
  &lt;prefix>/site/&lt;/prefix>
  &lt;suffix>/@href&lt;/suffix>
&lt;/component-instance>
</pre>
<p>
Then a key <code>foo</code> will cause <code>xmlmodule</code> to be queried for
attribute <code>/site/foo/@href</code>, and that value will be returned.</p>
<p>
Another useful example is <a href="ChainMetaModule.html">ChainMetaModule</a>,
which will query a set of input modules until one returns a non-null value for
an attribute, providing "fall-back" behaviour.
</p>
<p>
The machinery for meta modules is provided in <a
href="AbstractMetaModule.html">AbstractMetaModule</a>.

<h2>JXPath use in Input Modules</h2>
<p>Many input modules make use of the <a
href="http://jakarta.apache.org/commons/jxpath/">JXPath</a> library, which lets
one traverse Java object structures with an XPath-like syntax.  Support for
this is mostly located in the <a
href="JXPathMetaModule.html">JXPathMetaModule</a> and <a
href="AbstractJXPathModule.html">AbstractJXPathModule</a> superclasses, which
should be kept synchronised.
</p>

<h2>Further Information</h2>
<p>The best way to learn what can be done with input modules is by examining
the samples that come with the Cocoon application.  The main Cocoon
documentation and Cocoon Wiki should have further information.
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/cocoon/components/search/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/cocoon/components/modules/input/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright © $ Apache Software Foundation. All Rights Reserved.
</BODY>
</HTML>
