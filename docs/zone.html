<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>Notes for lenya.zones.apache.org.</title>
<link type="text/css" href="../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../skin/print.css" rel="stylesheet">
<link type="text/css" href="../skin/profile.css" rel="stylesheet">
<script src="../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://lenya.apache.org/">lenya</a><script src="../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="Lenya" src="../images/apache-lenya-light.png" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href=""></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="lenya.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with ');" size="25" name="q" id="query" type="text" value="Search the site with ">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../index.html">Project</a>
</li>
<li class="current">
<a class="selected" href="../docs/index.html">Documentation</a>
</li>
<li>
<a class="unselected" href="../community/index.html">Community</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs">
<a class="unselected" href="../docs/1_4/index.html">Version 1.4</a><a class="unselected" href="../docs/modules/index.html">Modules</a><a class="unselected" href="../docs/1_2_x/index.html">Version 1.2</a>
</div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../skin/images/chapter_open.gif');">Documentation</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../docs/index.html">Index</a>
</div>
<div class="menuitem">
<a href="../docs/coding-guidelines.html">Coding Guidelines</a>
</div>
<div class="menuitem">
<a href="../docs/unittests.html">Unit Tests</a>
</div>
<div class="menuitem">
<a href="../docs/website-update.html">Website Update</a>
</div>
<div class="menuitem">
<a href="../docs/release.html">Release Management</a>
</div>
<div class="menupage">
<div class="menupagetitle">Zone notes</div>
<div class="menupageitemgroup">
<div class="menupageitem">
<a href="#Overview">Overview</a>
</div>
<div class="menupageitem">
<a href="#configuration">Configuration</a>
</div>
<div class="menupageitem">
<a href="#software">Software</a>
</div>
<div class="menupageitem">
<a href="#admin">Administration</a>
</div>
</div>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://apachecon.com/2007/EU/"><img border="0" title="ApacheCon Europe 2007" alt="ApacheCon Europe 2007 - logo" src="http://apache.org/ads/ApacheCon/2007-europe-125x125.png" style="width: 125px;height: 125px;"></a><a href="http://people.apache.org/calendar.html#200711"><img border="0" title="ApacheCon US 2007" alt="ApacheCon US 2007 - logo" src="http://apache.org/ads/ApacheCon/2007-usa-125x125.png" style="width: 125px;height: 125px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="zone.pdf"><img alt="PDF -icon" src="../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Notes for lenya.zones.apache.org.</h1>
    
<a name="N1000D"></a><a name="Overview"></a>
<h2 class="h3">Overview</h2>
<div class="section">
<p> The server <a href="http://lenya.zones.apache.org">lenya.zones.apache.org</a> 
        provides our testing and demonstration area. It is managed by Apache 
        Lenya committers. </p>
</div>
    
<a name="N1001B"></a><a name="configuration"></a>
<h2 class="h3">Configuration</h2>
<div class="section">
<div class="warning">
<div class="label">Warning</div>
<div class="content"> We are not finished setting up our zone server (better said 
        still in a very early stage), if something is not working it is maybe 
        because it is not set up yet. ;-) Besides the directory structure may 
        change. </div>
</div>
<p> Bin files and site structure are stored in SVN at 
        <span class="codefrag">https://svn.apache.org/repos/asf/lenya/zone</span>. Please make 
        sure you have a local copy which you can edit. You should not edit our 
        zone files directly on the server. To update them just do <span class="codefrag">svn 
        update</span>. For more information about the scripts please read the 
        source code.</p>
<div class="note">
<div class="label">Note</div>
<div class="content">Till now we only had one user <span class="codefrag">lenya</span>. Further to 
        understand what is going on read the source code.</div>
</div>
<p> 
<strong>bin</strong> - svn-checkout@zone: /export/home/lenya/bin </p>
<dl>
        
<dt>killer</dt>
        
<dd>kill all processes containing specified strings.</dd>
        
<dt>lenya-for-forrest.sh</dt>
        
<dd>Will update, build clean, build and start the forrest docu instance 
          (not in use ATM)</dd>
        
<dt>mycrons.cron</dt>
        
<dd>Shows the currently configured schedule. If you change it, make 
          sure to as well apply it (see <a href="#tips">tips and tricks)</a>.</dd>
        
<dt>nightlies.sh</dt>
        
<dd>This script will build lenya trunk 
          http://lenya.zones.apache.org:9999/index.html and lenya-1.2.x 
          http://lenya.zones.apache.org:8888/index.html Further you can 
          invoke/prevent "svn update" and the building of cocoon/lenya. FIXME: 
          I will split this script apart for each lenya version.</dd>
        
<dt>setenv*.sh</dt>
        
<dd>set the environment (NOTE: Till now it is a non verified copy from 
          forrest)</dd>
      
</dl>
<p> 
<strong>htdocs</strong> - svn-checkout@zone: 
        /export/home/lenya/htdocs </p>
<p>Containing src and build of our zones website. Here you can find 
        various forrestbot configuration files (publish-website-preview.xml and 
        publish-zone.xml) which are deploying the zones site and the lenya 
        staging docu.</p>
<p>All files are owned in the group "other" so any one of us can 
        edit/update. Make sure that your 'umask' is set properly so that new 
        files have group write permissions. See the <a href="#admin-user">notes</a> about user administration. FIXME: Add a 
        proper group. </p>
</div>
    
<a name="N1006F"></a><a name="software"></a>
<h2 class="h3">Software</h2>
<div class="section">
<p> Global zone software is as described in <a href="http://www.apache.org/dev/solaris-zones.html">zone 
        administration</a>. </p>
<p> Various local software is installed in <span class="codefrag">/export/opt/</span> (not 
        managed with SVN) ... </p>
<p>Till now we have installed all additional software in <span class="codefrag"> 
        /export/home/lenya/src</span>. They are mostly svn checkouts of lenya, 
        cocoon and forrest.</p>
<div class="fixme">
<div class="label">Fixme (thorsten)</div>
<div class="content">Add more information.</div>
</div>
</div>
    
<a name="N1008D"></a><a name="admin"></a>
<h2 class="h3">Administration</h2>
<div class="section">
<p> See the general notes for the <a href="http://www.apache.org/dev/solaris-zones.html">zone 
        administration</a>. </p>
<p> The project chair is the root user. Committers can ask on the dev 
        list to get a user account added or modified. </p>
<p> Follow Leo's config ideas at <a href="http://wiki.apache.org/gump/GumpZonesConfig">GumpZonesConfig</a>. 
        </p>
<p> FIXME: Start apache2 on boot (using new Solaris init.d replacement 
        called smf). At the moment we need to realise that it is down and 
        manually restart as per http://www.apache.org/dev/solaris-zones.html 
        Also it seems that /var/run/apache2 is wiped out on reboot, so need to 
        mkdir again. </p>
<a name="N100A7"></a><a name="admin-user"></a>
<h3 class="h4">User administration</h3>
<p>After receiving your account, please be sure to configure it 
          properly.</p>
<p>See some notes at <a href="http://www.apache.org/dev/solaris-zones.html">zone 
          administration</a> and the general notes for <a href="http://www.apache.org/dev/new-committers-guide.html#shell">new 
          committers</a> (especially the part about 'umask'). </p>
<p> Look at the setup of some other users on our zone. </p>
<a name="N100BF"></a><a name="tips"></a>
<h3 class="h4">Tips and tricks</h3>
<p>
<strong>lenya user</strong> - Till now we have used only the user 
          <span class="codefrag">lenya</span> to start all scripts and manage the cronjobs. 
          Doing the following you are save to do your work.</p>
<pre class="code">su lenya 
Password: (like sended to you)</pre>
<p>
<strong>restarting services</strong> - You should not restart 
          manually the instances, it is better to use  
          <span class="codefrag">/export/home/lenya/bin/nightlies.sh</span>. If you do please store the pid in 
          <span class="codefrag">/export/home/lenya/bin</span> in one of the following files:</p>
<pre class="code">lenya-1_2.pid
lenya-for-forrest.pid
lenya-trunk.pid
          </pre>
<p>
<strong>cron</strong> - The user <span class="codefrag">lenya</span> is owner of 
            all cron jobs running on zones. If you want to add another cron 
            please edit mycrons.cron (zone/bin) - follow the <a href="http://www.scrounge.org/linux/cron.html">useful 
            reference</a>. Then commit and ssh to the server:</p>
<pre class="code">ssh -l lenya lenya.zones.apache.org
-bash-3.00$ cd bin/
-bash-3.00$ svn up
-bash-3.00$ crontab mycrons.cron #loads the actual cron jobs
-bash-3.00$ crontab -l #check to see if it was loaded
            </pre>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2005 <a href="http://www.apache.org/licenses/LICENSE-2.0">The Apache Software Foundation.</a>
</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:dev@lenya.apache.org?subject=Feedback%C2%A0for%C2%A0docs/zone.html">dev@lenya.apache.org</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
