<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Meta Data</title>
<link type="text/css" href="../../../skin/page.css" rel="stylesheet">
</head>
<body text="#000000" bgcolor="#FFFFFF">
<!--================= start Banner ==================-->
<table summary="header with logos" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<!--================= start Group Logo ==================-->
<td valign="bottom" bgcolor="#FFFFFF">
<div class="headerlogo">
<a href="http://cocoon.apache.org"><img border="0" class="logoImage" alt="Apache Cocoon" src="../../../images/cocoon-project-logo-big.png"></a>
</div>
<span class="textheader">Apache Cocoon</span>
<!--================= start Tabs ==================-->
<div class="tab">
<table summary="tab bar" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="10" valign="bottom">
<div class="tab-separator">
<img alt="" width="10" src="../../../skin/images/spacer.gif"></div>
</td><td valign="bottom" class="tab">
<div class="tab-separator">
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td style="background-image: url(../../../skin/images/tab-left.png)" valign="top" width="5" height="5"><img alt="" src="../../../skin/images/tab-corner-left.png"></td><td rowspan="2" valign="bottom" class="tab">
<div class="tab-not-selected-shadow">
<div class="tab-not-selected">
<a href="../../../project/index.html"><font face="Arial, Helvetica, Sans-serif">Project Information</font></a>
</div>
</div>
</td><td style="background-image: url(../../../skin/images/tab-right.png)" valign="top" width="5" height="5"><img alt="" src="../../../skin/images/tab-corner-right.png"></td>
</tr>
<tr>
<td style="background-image: url(../../../skin/images/tab-left.png)" valign="bottom">
<div class="tab-not-selected-shadow-left">
<img alt="" width="4" src="../../../skin/images/spacer.gif"></div>
</td><td style="background-image: url(../../../skin/images/tab-right.png)" valign="bottom">
<div class="tab-not-selected-shadow-right">
<img alt="" width="4" src="../../../skin/images/spacer.gif"></div>
</td>
</tr>
</table>
</div>
</td><td valign="bottom" class="tab">
<div class="tab-separator">
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td style="background-image: url(../../../skin/images/tab-left.png)" valign="top" width="5" height="5"><img alt="" src="../../../skin/images/tab-corner-left.png"></td><td rowspan="2" valign="bottom" class="tab">
<div class="tab-not-selected-shadow">
<div class="tab-not-selected">
<a href="../../../installation/index.html"><font face="Arial, Helvetica, Sans-serif">Installation</font></a>
</div>
</div>
</td><td style="background-image: url(../../../skin/images/tab-right.png)" valign="top" width="5" height="5"><img alt="" src="../../../skin/images/tab-corner-right.png"></td>
</tr>
<tr>
<td style="background-image: url(../../../skin/images/tab-left.png)" valign="bottom">
<div class="tab-not-selected-shadow-left">
<img alt="" width="4" src="../../../skin/images/spacer.gif"></div>
</td><td style="background-image: url(../../../skin/images/tab-right.png)" valign="bottom">
<div class="tab-not-selected-shadow-right">
<img alt="" width="4" src="../../../skin/images/spacer.gif"></div>
</td>
</tr>
</table>
</div>
</td><td style="background-image: url(../../../skin/images/tab-left-selected.png)" valign="top" width="5"><img alt="" src="../../../skin/images/tab-corner-left-selected.png"></td><td valign="bottom" class="tab">
<div class="tab-selected">
<a href="../../index.html"><font color="#000000">Documentation</font></a>
</div>
</td><td style="background-image: url(../../../skin/images/tab-right-selected.png)" valign="top" width="5"><img alt="" src="../../../skin/images/tab-corner-right-selected.png"></td><td valign="bottom" class="tab">
<div class="tab-separator">
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td style="background-image: url(../../../skin/images/tab-left.png)" valign="top" width="5" height="5"><img alt="" src="../../../skin/images/tab-corner-left.png"></td><td rowspan="2" valign="bottom" class="tab">
<div class="tab-not-selected-shadow">
<div class="tab-not-selected">
<a href="../../../community/index.html"><font face="Arial, Helvetica, Sans-serif">Community</font></a>
</div>
</div>
</td><td style="background-image: url(../../../skin/images/tab-right.png)" valign="top" width="5" height="5"><img alt="" src="../../../skin/images/tab-corner-right.png"></td>
</tr>
<tr>
<td style="background-image: url(../../../skin/images/tab-left.png)" valign="bottom">
<div class="tab-not-selected-shadow-left">
<img alt="" width="4" src="../../../skin/images/spacer.gif"></div>
</td><td style="background-image: url(../../../skin/images/tab-right.png)" valign="bottom">
<div class="tab-not-selected-shadow-right">
<img alt="" width="4" src="../../../skin/images/spacer.gif"></div>
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<!--================= end Tabs ==================-->
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td width="100%" valign="bottom" align="right" bgcolor="#FFFFFF">
<div style="padding: 10px" class="headerlogo">
<a href="http://cocoon.apache.org/lenya"><img border="0" class="logoImage" alt="Lenya" src="../../../images/apache-lenya-light.png"></a>
</div>
<div class="tab-separator"></div>
</td>
<!--================= end Project Logo ==================-->
</tr>
</table>
<!--================= end Banner ==================-->
<div class="tab-bar">
<img alt="" height="5" src="../../../skin/images/spacer.gif"></div>
<!--================= start Menu, NavBar, Content ==================-->
<table summary="page content" bgcolor="#ffffff" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top">
<table summary="menu" border="0" cellspacing="0" cellpadding="0">
<tr>
<!--================= start left top NavBar ==================-->
<!--================= end left top NavBar ==================-->
<td valign="top">
<div class="tab-subbar">
<img width="10" height="5" alt="" src="../../../skin/images/spacer.gif"></div>
</td><td valign="top">
<!--================= start Menu items ==================-->
<div class="menu">
<div class="menutitle"></div>
<div class="menuitemgroup">
<div class="menutitle">Integrator/Dev Guide</div>
<div class="menuitemgroup">
<div class="menutitle">Components</div>
<div class="menuitemgroup">
<div class="menutitle">Meta Data</div>
<div class="menuitemgroup">
<div class="menupage">
<div class="menupagetitle">Meta Data Handling</div>
<div class="menupageitemgroup">
<div class="menupageitem">
<a href="#Introduction">Introduction</a>
</div>
<div class="menupageitem">
<a href="#Implementation">Implementation</a>
</div>
<div class="menupageitem">
<a href="#Involved+classes%2C+XSPs+and+XSLTs">Involved classes, XSPs and XSLTs</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!--================= end Menu items ==================-->
</td><td valign="top">
<div class="tab-subbar">&nbsp;&nbsp;</div>
</td>
</tr>
<tr>
<td></td><td height="5"><img alt="" width="150" height="1" src="../../../skin/images/spacer.gif"></td><td></td>
</tr>
</table>
</td><td valign="top" width="100%">
<table summary="content" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" colspan="3">
<div class="tab-subbar">&nbsp;&nbsp;</div>
</td>
</tr>
<!--================= start Content==================-->
<tr>
<td align="left" width="10"><img width="10" height="1" alt="" src="../../../skin/images/spacer.gif"></td><td align="left" width="100%">
<div class="content">
<table cellspacing="0" cellpadding="0" class="title">
<tr>
<td valign="middle">
<h1>Meta Data</h1>
</td><td nowrap="nowrap" width="40" align="center"><a class="dida" href="metadata.pdf"><img alt="PDF" src="../../../skin/images/pdfdoc.gif" border="0"><br>
          PDF</a></td>
</tr>
</table>
    
    
<a name="N101C9"></a><a name="Introduction"></a>
<h3>Introduction</h3>
<div style="margin-left: 0 ; border: 2px">
<p>Meta data is kept directly inside the xml document. It is
      based on the <a href="http://dublincore.org">Dublin Core</a>
      standard.</p>
<p>There are basically three use cases:</p>
<ol>
	
<li>Create Meta Data</li>
	
<li>Display Meta Data</li>
	
<li>Modify Meta Data</li>
      
</ol>
</div>

    
<a name="N101E6"></a><a name="Implementation"></a>
<h3>Implementation</h3>
<div style="margin-left: 0 ; border: 2px">
<p></p>
<a name="N101EE"></a><a name="Create+Meta+Data"></a>
<h4>Create Meta Data</h4>
<div style="margin-left: 0 ; border: 2px">
<p>Upon creation of a document a sample is copied from the
	sample doctype directory. This sample already contains some
	sample meta data. The creator then applies an XSLT
	transformation to this sample which adapts the sample values
	to the values suplied in the creator request. This values are
	partially filled in by the user (subject, desciption, etc.)
	and partly by the system (creator, creation data). This is
	done in the <span class="codefrag">create</span> ant task which at the end
	invokes an xslt task which applies the
	<span class="codefrag">addMetaData.xsl</span> stylesheet which adapts the meta
	data according to the request values.</p>
</div>
<a name="N101FE"></a><a name="Display+Meta+Data"></a>
<h4>Display Meta Data</h4>
<div style="margin-left: 0 ; border: 2px">
<p>The display of meta data is handled by the <span class="codefrag">meta.xsp</span> xsp.</p>
</div>
<a name="N1020B"></a><a name="Modify+Meta+data"></a>
<h4>Modify Meta data</h4>
<div style="margin-left: 0 ; border: 2px">
<p>The modification of meta data is handled in the
	<span class="codefrag">info.xmap</span> sitemap. The matcher makes sure to
	check the document out before the modification and checking it
	back in after the modification. This is done using the
	<span class="codefrag">ReservedCheckoutTestAction</span> and
	<span class="codefrag">ReservedCheckinAction</span>.  If there is an error the
	request is redirected to the meta data screen which displays a
	warning saying that the checkout or checkin failed and who was
	locking the document since what date and time.</p>
<p>Once the document is checked out the madifications are
	applied with the help of an ant task. There is a target named
	<span class="codefrag">save-meta-data</span> which simply invokes the ant task
	<span class="codefrag">WriteDCParametersTask</span>.  This task saves the meta
	data using the <span class="codefrag">DublinCore</span> interface.</p>
</div>
</div>

    
<a name="N1022B"></a><a name="Involved+classes%2C+XSPs+and+XSLTs"></a>
<h3>Involved classes, XSPs and XSLTs</h3>
<div style="margin-left: 0 ; border: 2px">
<p>The following classes, XSPs and XSLTs are involved in meta
      data handling:</p>
<dl>
	
<dt>org.apache.lenya.cms.ant.WriteDCParametersTask</dt>
	
<dd>A simple ant task which saves the meta data which is
	  passed as arguments to file using the
	<span class="codefrag">DublinCore</span> class.</dd>
	
<dt>$publication-id/config/tasks/targets.xml</dt>
	
<dd>Defines the <span class="codefrag">save-meta-data</span> target which
	handles saving of meta data with the help of the
	<span class="codefrag">WriteDCParametersTask</span> ant task. Also defines
	the <span class="codefrag">create</span> target which is used create new
	documents and to change the meta data according to the request
	values from the creation request.</dd>
	
<dt>org.apache.lenya.cms.publication.DublinCore</dt>
	
<dd>A simple interface to save and retrieve dublin core meta
	data.</dd>
	
<dt>org.apache.lenya.cms.cocoon.acting.ReservedCheckoutTestAction</dt>
	
<dd>Action that tests if a document can be checked out and if
	yes does check it out (See <a href="../revisioncontrol/revisioncontroller.html">Revision Controller</a>).</dd>
	
<dt>org.apache.lenya.cms.cocoon.acting.ReservedCheckinAction</dt>
	
<dd>Action that checks a document in (See <a href="../revisioncontrol/revisioncontroller.html">Revision Controller</a>).</dd>
	
<dt>src/webapp/lenya/content/info/meta.xsp, src/webapp/lenya/xslt/info/info.xsl</dt>
	
<dd>Handle the display of the meta data in the info area. This
	is also a form which can be used to modify the meta data via a
	POST request.</dd>
<!-- 	FIXME: move the unizh stuff into the core. -->
	
<dt>unizh/pubs/unizh/xslt/authoring/addMetaData.xsl</dt>
	
<dd>Simple XSLT stylesheet that modifies the meta data
	according to the input parameters.</dd>
      
</dl>
</div>
  
</div>
</td><td width="10"><img width="10" height="1" alt="" src="../../../skin/images/spacer.gif"></td>
</tr>
<!--================= end Content==================-->
</table>
</td>
</tr>
<tr>
<td>
<br>
<br>
</td>
</tr>
</table>
<!--================= end Menu, NavBar, Content ==================-->
<!--================= start Footer ==================-->
<div class="footer">
<table summary="footer" cellspacing="0" cellpadding="0" width="100%" border="0">
<tr>
<td colspan="2" height="1"><img height="1" width="1" alt="" src="../../../skin/images/spacer.gif"><a href="../../../skin/images/label.gif"></a><a href="../../../skin/images/page.gif"></a><a href="../../../skin/images/chapter.gif"></a><a href="../../../skin/images/chapter_open.gif"></a><a href="../../../skin/images/current.gif"></a></td>
</tr>
<tr>
<td colspan="2" class="copyright" align="center" width="90%"><span class="footnote">Copyright &copy;
                2002-2003&nbsp;The Apache Software Foundation. All rights reserved.
                <br>
<script type="text/javascript" language="JavaScript"><!--
                  document.write(" - "+"Last Published: " + document.lastModified);
                  //  --></script></span></td><td nowrap="nowrap" align="right" class="logos"><a href="http://validator.w3.org/check/referer"><img width="88" height="31" alt="Valid HTML 4.01!" src="../../../skin/images/valid-html401.png" class="logoImage" border="0"></a><a href="http://jigsaw.w3.org/css-validator/"><img width="88" height="31" alt="Valid CSS!" src="../../../skin/images/vcss.png" class="logoImage" border="0"></a></td>
</tr>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
