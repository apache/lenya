<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>The Lenya Menubar</title>
<link type="text/css" href="../../../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../../../skin/profile.css" rel="stylesheet">
<script src="../../../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://lenya.apache.org/">lenya</a><script src="../../../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="Lenya" src="../../../../images/apache-lenya-light.png" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href=""></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="lenya.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with ');" size="25" name="q" id="query" type="text" value="Search the site with ">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../../../../index.html">Project</a>
</li>
<li>
<a class="unselected" href="../../../../docs/index.html">Developer</a>
</li>
<li>
<a class="unselected" href="../../../../community/index.html">Community</a>
</li>
<li>
<a class="unselected" href="../../../../docs/2_0_x/index.html">Version 2.0</a>
</li>
<li class="current">
<a class="selected" href="../../../../docs/1_2_x/index.html">Version 1.2</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">

             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../../../../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../../../../skin/images/chapter_open.gif');">Version 1.2</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../../../docs/1_2_x/index.html">Index</a>
</div>
<div onclick="SwitchMenu('menu_1.1.2', '../../../../skin/')" id="menu_1.1.2Title" class="menutitle">Installation</div>
<div id="menu_1.1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/installation/index.html">Download</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/installation/subversion.html">Subversion Access</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/installation/source_version.html">Install Instructions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.3', '../../../../skin/')" id="menu_1.1.3Title" class="menutitle">Tutorial</div>
<div id="menu_1.1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/index.html">Introduction</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/understanding_lenya.html">1. Understanding Lenya</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/installing_lenya.html">2. Installing Lenya</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/anatomy_of_the_pipeline.html">3. Anatomy of the Pipeline</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/editing_in_lenya.html">4. Editing in Lenya</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/custom_navigation.html">5. Custom Navigation in Lenya</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/mod_proxy_and_lenya.html">6a. Mod Proxy and Lenya</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/tutorial/mod_proxy_and_lenya_continued.html">6b. Mod Proxy and Lenya</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.4', '../../../../skin/')" id="menu_1.1.4Title" class="menutitle">How-To</div>
<div id="menu_1.1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/faq.html">FAQ</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/new_publication.html">New Publication</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/deploy_publication.html">Deploy Publication</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/look_and_feel.html">Look and Feel</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/custom_resourcetype.html">Custom Resource Type</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/new_mime_type.html">Adding Mime Types</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/site_navigation.html">Site Navigation</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/ldap_authentication.html">LDAP Authentication</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/cms_menus.html">CMS Menus</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/cms_screens.html">CMS Screens</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/search.html">Search Publications</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/external_data.html">External Data</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/how-to/unittests.html">Unit Tests</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.5', '../../../../skin/')" id="menu_selected_1.1.5Title" class="menutitle" style="background-image: url('../../../../skin/images/chapter_open.gif');">Components</div>
<div id="menu_selected_1.1.5" class="selectedmenuitemgroup" style="display: block;">
<div onclick="SwitchMenu('menu_1.1.5.1', '../../../../skin/')" id="menu_1.1.5.1Title" class="menutitle">Access&nbsp;Control</div>
<div id="menu_1.1.5.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/terms.html">Basic Terms</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/accesscontrollers.html">Access&nbsp;Controllers</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/accesscontrollerresolvers.html">Access Controller Resolvers</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/authenticators.html">Authenticators</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/authorizers.html">Authorizers</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/policymanagers.html">Policies and Policy&nbsp;Managers</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/accreditablemanagers.html">Accreditable&nbsp;Managers</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/accesscontrol/ssl.html">SSL Encryption</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.2', '../../../../skin/')" id="menu_1.1.5.2Title" class="menutitle">Authoring</div>
<div id="menu_1.1.5.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/authoring/adding-document-creator.html">Adding a new document creator</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/authoring/image-upload.html">Image Upload</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/authoring/openoffice.html">OpenOffice</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.3', '../../../../skin/')" id="menu_1.1.5.3Title" class="menutitle">Deployment</div>
<div id="menu_1.1.5.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/deployment/proxying.html">Proxying</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.4', '../../../../skin/')" id="menu_1.1.5.4Title" class="menutitle">Editors</div>
<div id="menu_1.1.5.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/editors/htmlform.html">HTML Form Editor</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/editors/1form.html">HTML One Form Editor</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/editors/bxe.html">Bitflux Editor</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/editors/kupu.html">Kupu</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/editors/xopus.html">Xopus</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.5.5', '../../../../skin/')" id="menu_selected_1.1.5.5Title" class="menutitle" style="background-image: url('../../../../skin/images/chapter_open.gif');">Layout</div>
<div id="menu_selected_1.1.5.5" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/layout/navigation.html">Navigation</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/layout/xhtml-templating.html">XHTML templating</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/layout/static-resources.html">Serving static resources</a>
</div>
<div class="menupage">
<div class="menupagetitle">Lenya Menubar</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.6', '../../../../skin/')" id="menu_1.1.5.6Title" class="menutitle">Publication</div>
<div id="menu_1.1.5.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/publication/pageenvelopemodule.html">PageEnvelopeModule</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/publication/siteTree.html">Site tree</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.7', '../../../../skin/')" id="menu_1.1.5.7Title" class="menutitle">Resource&nbsp;Types</div>
<div id="menu_1.1.5.7" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/resource-types/resource-types.html">Resource&nbsp;Types</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.8', '../../../../skin/')" id="menu_1.1.5.8Title" class="menutitle">Revision Control</div>
<div id="menu_1.1.5.8" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/revisioncontrol/revisioncontroller.html">Revision Controller</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/revisioncontrol/rcml.html">RCML</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/revisioncontrol/checkin.html">Check In</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/revisioncontrol/checkout.html">Check Out</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/revisioncontrol/version.html">Revisions</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/revisioncontrol/rollback.html">Rollback</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.9', '../../../../skin/')" id="menu_1.1.5.9Title" class="menutitle">Repository</div>
<div id="menu_1.1.5.9" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/repository/index.html">WebDAV Servers</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.10', '../../../../skin/')" id="menu_1.1.5.10Title" class="menutitle">Search</div>
<div id="menu_1.1.5.10" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/search/lucene.html">Searching with Lucene</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.11', '../../../../skin/')" id="menu_1.1.5.11Title" class="menutitle">URI Handling</div>
<div id="menu_1.1.5.11" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/uri-handling/URIParametrizer.html">URI Parametrizer</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/uri-handling/standardURI.html">URI Scheme</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/uri-handling/usecases.html">Usecases</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.12', '../../../../skin/')" id="menu_1.1.5.12Title" class="menutitle">Asset Management</div>
<div id="menu_1.1.5.12" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/asset-management/management.html">Asset Management</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.13', '../../../../skin/')" id="menu_1.1.5.13Title" class="menutitle">Link Management</div>
<div id="menu_1.1.5.13" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/link-management/link-management.html">Link Management</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.14', '../../../../skin/')" id="menu_1.1.5.14Title" class="menutitle">Meta Data</div>
<div id="menu_1.1.5.14" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/metadata/metadata.html">Meta Data Handling</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.15', '../../../../skin/')" id="menu_1.1.5.15Title" class="menutitle">Multilingual Documents</div>
<div id="menu_1.1.5.15" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/multilingual/multilingual.html">Multilingual Document Handling</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.16', '../../../../skin/')" id="menu_1.1.5.16Title" class="menutitle">Tasks</div>
<div id="menu_1.1.5.16" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/concept.html">The Task Concept</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/defining.html">Defining Tasks</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/taskaction.html">The TaskAction</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/scheduling.html">Scheduling a Task</a>
</div>
<div onclick="SwitchMenu('menu_1.1.5.16.5', '../../../../skin/')" id="menu_1.1.5.16.5Title" class="menutitle">Included tasks</div>
<div id="menu_1.1.5.16.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/anttask.html">AntTask</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/publisher.html">DefaultFilePublisher</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/exporter.html">StaticHTMLExporter</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/mailtask.html">MailTask</a>
</div>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/tasks/development.html">Developing Tasks</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.17', '../../../../skin/')" id="menu_1.1.5.17Title" class="menutitle">Workflow</div>
<div id="menu_1.1.5.17" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/workflow/terms.html">Terms</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/workflow/state-machine.html">The State Machine</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/workflow/configuration.html">Configuration</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/workflow/implementation.html">Implementation</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.18', '../../../../skin/')" id="menu_1.1.5.18Title" class="menutitle">Site Management</div>
<div id="menu_1.1.5.18" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/archive.html">Archive</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/copy.html">Copy</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/deactivate.html">Deactivate</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/delete.html">Delete</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/deletetrash.html">Delete the trash</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/move.html">Move</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/moveupdown.html">Move Up/Down</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/rename.html">Rename</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/components/sitemanagement/restore.html">Restore</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.6', '../../../../skin/')" id="menu_1.1.6Title" class="menutitle">Miscellaneous</div>
<div id="menu_1.1.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../../../docs/1_2_x/misc/namespaces.html">Namespaces</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/misc/reserved_names.html">Reserved Names</a>
</div>
<div class="menuitem">
<a href="../../../../docs/1_2_x/misc/xinclude-processor.html">XInclude Processor</a>
</div>
</div>
<div class="menuitem">
<a href="../../../../apidocs/1.2/index.html">1.2 API (Javadoc)</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://wiki.apache.org/lenya/MeetingFreiburg2008"><img border="0" title="Meeting Freiburg 2008" alt="Meeting Freiburg 2008 - logo" src="../../../../images/apache-lenya-meeting-freiburg-2008.png" style="width: 160px;height: 40px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="lenya-menubar.pdf"><img alt="PDF -icon" src="../../../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>The Lenya Menubar</h1>
<div id="front-matter">
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Defining+the+Menubar">Defining the Menubar</a>
<ul class="minitoc">
<li>
<a href="#The+XML+Structure">The XML Structure</a>
</li>
<li>
<a href="#Showing+Blocks+and+Items+Only+in+Certain+Tabs">Showing Blocks and Items Only in Certain Tabs</a>
</li>
<li>
<a href="#Specifying+Usecases+and+Workflow+Events">Specifying Usecases and Workflow Events</a>
</li>
</ul>
</li>
<li>
<a href="#Applying+the+Menubar+-+Meta+Stylesheet+Approach">Applying the Menubar - Meta Stylesheet Approach</a>
<ul class="minitoc">
<li>
<a href="#The+Big+Picture+%28literally%29">The Big Picture (literally)</a>
<ul class="minitoc">
<li>
<a href="#Creating+the+Menu+XHTML">Creating the Menu XHTML</a>
</li>
<li>
<a href="#Requesting+and+Applying+the+Menubar">Requesting and Applying the Menubar</a>
</li>
</ul>
</li>
<li>
<a href="#Configuring+the+Publication">Configuring the Publication</a>
<ul class="minitoc">
<li>
<a href="#Requesting+the+lenya-page+Meta+Stylesheet">Requesting the lenya-page Meta Stylesheet</a>
</li>
<li>
<a href="#Creating+the+Menu+XML">Creating the Menu XML</a>
</li>
<li>
<a href="#Supplying+Menus+in+menus.xmap">Supplying Menus in menus.xmap</a>
</li>
</ul>
</li>
<li>
<a href="#Creating+a+Customized+Menu">Creating a Customized Menu</a>
</li>
</ul>
</li>
<li>
<a href="#Applying+the+Menubar+-+Classic+Approach">Applying the Menubar - Classic Approach</a>
</li>
</ul>
</div>
</div>
  

<a name="N1000E"></a><a name="Defining+the+Menubar"></a>
<h2 class="h3">Defining the Menubar</h2>
<div class="section">
<a name="N10013"></a><a name="The+XML+Structure"></a>
<h3 class="h4">The XML Structure</h3>
<p>
  A menubar declaration contains the definition of several menus.
  Each menu consists of a set of blocks containing items.
  The structure of a menu declaration looks as follows:
</p>
<pre class="code">&lt;menu xmlns="http://apache.org/cocoon/lenya/menubar/1.0"&gt;

  &lt;menus&gt;
    
    &lt;menu label="File" name="File"&gt;
      &lt;block&gt;
        &lt;item href="..."&gt;New Document&lt;/item&gt;
        &lt;item href="..."&gt;New Language Version&lt;/item&gt;
        ...
      &lt;/block&gt;
      ...
    &lt;/menu&gt;
    
    ...

  &lt;/menus&gt;

&lt;/menu&gt;</pre>
<a name="N10020"></a><a name="Showing+Blocks+and+Items+Only+in+Certain+Tabs"></a>
<h3 class="h4">Showing Blocks and Items Only in Certain Tabs</h3>
<p>
  When you use the same menu declaration for different tabs,
  it might be wished that a menu item shouldn't appear in all
  these tabs. For instance, the <em>Edit</em> menu item should
  be displayed only in the <em>authoring</em> tab menu.
</p>
<p>
  To disable a menu item or block, you add an attribute with
  the name of the tab (<em>authoring</em>, <em>info</em>)
  and the value <span class="codefrag">false</span>:
</p>
<pre class="code">&lt;item info="false"&gt;...&lt;/item&gt;

&lt;block authoring="false"&gt;
  ...
&lt;/block&gt;
</pre>
<a name="N1003F"></a><a name="Specifying+Usecases+and+Workflow+Events"></a>
<h3 class="h4">Specifying Usecases and Workflow Events</h3>
<p>
  When a menu item calls a usecase or triggers a workflow transition,
  and the corresponding action is not allowed, the <span class="codefrag">href</span>
  attribute of the item is removed before the menu is rendered to
  disable the item. For this purpose, the <span class="codefrag">&lt;item&gt;</span>
  element supports the attributes
</p>
<ul>
  
<li>
<span class="codefrag">wf:event</span>,</li>
  
<li>
<span class="codefrag">uc:usecase</span>, and</li>
  
<li>
<span class="codefrag">uc:step</span>.</li>

</ul>
<p>
  If the attributes are provided, they are translated into the
  appropriate request parameters:
</p>
<ul>
  
<li>
<span class="codefrag">wf:event -&gt; lenya.event</span>
</li>
  
<li>
<span class="codefrag">uc:usecase -&gt; lenya.usecase</span>
</li>
  
<li>
<span class="codefrag">uc:step -&gt; lenya.step</span>
</li>

</ul>
<p>
  The attributes are used in the following way:
</p>
<pre class="code">&lt;menu
    xmlns="http://apache.org/cocoon/lenya/menubar/1.0"
    xmlns:uc="http://apache.org/cocoon/lenya/usecase/1.0"
    xmlns:wf="http://apache.org/cocoon/lenya/workflow/1.0"&gt;

  ...

  &lt;item wf:event="edit"
        uc:usecase="edit-forms"
        uc:step="open" href="?..."&gt;Edit with Forms&lt;/item&gt;
  
  ...

&lt;/menu&gt;</pre>
<p>
  The resulting request would be
</p>
<pre class="code">?lenya.event=edit&amp;lenya.usecase=edit-forms&amp;lenya.step=open&amp;...</pre>
<p>
  If a user is not allowed to invoke the event <span class="codefrag">edit</span>
  or to execute the usecase <span class="codefrag">edit-forms</span>, the menu
  item will be disabled.
</p>
</div>
  

<a name="N1008A"></a><a name="Applying+the+Menubar+-+Meta+Stylesheet+Approach"></a>
<h2 class="h3">Applying the Menubar - Meta Stylesheet Approach</h2>
<div class="section">
<p>
In this approach, the publication simply builds its XHTML
page without any additional XML. The Lenya menubar is added using
a meta stylesheet in the last transformation step.
You find more information on meta stylesheets on the page
<a href="http://wiki.apache.org/lenya/MetaStylesheets">MetaStylesheets</a>
in the Cocoon wiki.
</p>
<a name="N10096"></a><a name="The+Big+Picture+%28literally%29"></a>
<h3 class="h4">The Big Picture (literally)</h3>
<p>

<img alt="Lenya page processing" src="../../../../images/lenya-page-processing.png">
</p>
<p>
In the left column you see the XML flow within the publication sitemaps,
  the right column shows the flow within the core sitemaps.
</p>
<a name="N100A5"></a><a name="Creating+the+Menu+XHTML"></a>
<h4>Creating the Menu XHTML</h4>
<ul>
  
<li>The actual menu XML is fetched from the sitemap <span class="codefrag">menus.xmap</span>
  within the publication directory.</li>
  
<li>The XML is processed using the UsecaseMenuTransformer and the
  WorkflowMenuTransformer.</li>
  
<li>The stylesheet <span class="codefrag">lenya/xslt/menu/menu2xhtml.xsl</span> transforms
  the menu XML into XHTML.</li>
  
<li>Finally, this XHTML is transformed into a meta stylesheet by
  <span class="codefrag">lenya/xslt/menu/menu2xslt.xsl</span>.</li>

</ul>
<a name="N100C3"></a><a name="Requesting+and+Applying+the+Menubar"></a>
<h4>Requesting and Applying the Menubar</h4>
<ul>
  
<li>The XHTML page is generated without any additional XML.</li>
  
<li>Afterwards, the menubar meta stylesheet is requested using
  a <span class="codefrag">cocoon://lenya-page/...</span> internal request.</li>
  
<li>This request is matched in <span class="codefrag">global-sitemap.xmap</span>.</li>
  
<li>The menubar meta stylesheet is applied to the XHTML page.
  It inserts the menubar at the top of the HTML body, adds some
  additional CSS file entries and modifies the HTML title.</li>

</ul>
<a name="N100DF"></a><a name="Configuring+the+Publication"></a>
<h3 class="h4">Configuring the Publication</h3>
<a name="N100E4"></a><a name="Requesting+the+lenya-page+Meta+Stylesheet"></a>
<h4>Requesting the lenya-page Meta Stylesheet</h4>
<p>The lenya-page meta stylesheet request looks as follows:</p>
<pre class="code">
&lt;map:generate src="cocoon:/page/..."/&gt;
&lt;map:transform src="cocoon://lenya-page/{page-envelope:publication-id}/[menu-url]"/&gt;
&lt;map:serialize type="html"/&gt;
</pre>
<ul>
  
<li>The <span class="codefrag">lenya-page</span> part is used to match the request in <span class="codefrag">global-sitemap.xmap</span>.</li>
  
<li>The <span class="codefrag">{page-envelope:publication-id}</span> part is used to evaluate which
  publication the request came from.</li>
  
<li>The <span class="codefrag">[menu-url]</span> part is used to get the menu from <span class="codefrag">menus.xmap</span>.
  Here you have to add all information you need to select the appropriate menubar.</li>

</ul>
<a name="N1010C"></a><a name="Creating+the+Menu+XML"></a>
<h4>Creating the Menu XML</h4>
<p>Usually, this is done using an XSP page.</p>
<p>The Lenya menubar namespace is</p>
<pre class="code">http://apache.org/cocoon/lenya/menubar/1.0</pre>
<a name="N1011C"></a><a name="Supplying+Menus+in+menus.xmap"></a>
<h4>Supplying Menus in menus.xmap</h4>
<p>When the lenya-page meta stylesheet is generated in the core,
the actual menu XML is fetched using a request to the sitemap
<span class="codefrag">menus.xmap</span> in the publication directory.
The <span class="codefrag">[menu-url]</span> part from the lenya-page request is
matched in this sitemap.</p>
<p>
This simple <span class="codefrag">menus.xmap</span> pipeline uses different
menus for authoring and live:
</p>
<pre class="code">
&lt;map:pipeline&gt;
  
  &lt;map:match pattern="live/**"&gt;
    &lt;map:generate type="serverpages"
        src="../../content/menus/live.xsp"/&gt;
    &lt;map:serialize type="xml"/&gt;
  &lt;/map:match&gt;
  
  &lt;map:match pattern="*/**"&gt;
    &lt;map:generate type="serverpages"
        src="config/menus/generic.xsp"/&gt;
    &lt;map:serialize type="xml"/&gt;
  &lt;/map:match&gt;
  
&lt;/map:pipeline&gt;
</pre>
<p>You can as well use the document type or the current URL to
select a menu.</p>
<p>Examples for lenya-page requests:</p>
<p>Using the area:</p>
<pre class="code">cocoon://lenya-page/{page-envelope:publication-id}/{page-envelope:area}</pre>
<p>Using the document type:</p>
<pre class="code">cocoon://lenya-page/{page-envelope:publication-id}/{page-envelope:document-type}</pre>
<p>Using the document URL:</p>
<pre class="code">cocoon://lenya-page/{page-envelope:publication-id}/{page-envelope:document-url}</pre>
<a name="N10151"></a><a name="Creating+a+Customized+Menu"></a>
<h3 class="h4">Creating a Customized Menu</h3>
<p>
  It is also possible to get the menu XML before it is transformed
  to XHTML using a request to the core. For this purpose, the prefix
  <span class="codefrag">menu-xml</span> is used instead of <span class="codefrag">lenya-page</span>.
  This way, you can aggregate the menu XML together with other page parts
  and include it somewhere inside the XML page.
</p>
<pre class="code">&lt;map:aggregate element="lenya" label="aggregation"&gt;
  &lt;map:part src="cocoon:/lenyabody/{1}/{2}.xml"/&gt;
  &lt;map:part src="cocoon://menu-xml/{page-envelope:publication-id}/{1}.xml"/&gt;
&lt;/map:aggregate&gt;</pre>
</div>



<a name="N10165"></a><a name="Applying+the+Menubar+-+Classic+Approach"></a>
<h2 class="h3">Applying the Menubar - Classic Approach</h2>
<div class="section">
<div class="note">
<div class="label">Note</div>
<div class="content">This approach is deprecated.</div>
</div>
<a name="N1016D"></a><a name="XSLT"></a>
<h3 class="h4">XSLT</h3>
<p>
By editing <span class="codefrag">src/webapp/lenya/xslt/menu/menu.xsl</span> one can change the look and feel of the Lenya menu bar.
This XSLT template is being included by <span class="codefrag">src/webapp/lenya/xslt/menu/root.xsl</span>.
</p>
</div>


</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2007 <a href="http://www.apache.org/licenses/LICENSE-2.0">The Apache Software Foundation.</a>
</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:dev@lenya.apache.org?subject=Feedback%C2%A0for%C2%A0docs/1_2_x/components/layout/lenya-menubar.html">dev@lenya.apache.org</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
