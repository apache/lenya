<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>Access Control Specification</title>
<link type="text/css" href="../../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../../skin/profile.css" rel="stylesheet">
<script src="../../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://lenya.apache.org/">lenya</a><script src="../../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="Lenya" src="../../../images/apache-lenya-light.png" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href=""></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="lenya.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with ');" size="25" name="q" id="query" type="text" value="Search the site with ">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../../../index.html">Project</a>
</li>
<li class="current">
<a class="selected" href="../../../docs/index.html">Documentation</a>
</li>
<li>
<a class="unselected" href="../../../community/index.html">Community</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs">
<a class="selected" href="../../../docs/1_4/index.html">Version 1.4</a><a class="unselected" href="../../../docs/modules/index.html">Modules</a><a class="unselected" href="../../../docs/1_2_x/index.html">Version 1.2</a>
</div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../../../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../../../skin/images/chapter_open.gif');">Version 1.4</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../../docs/1_4/index.html">Index</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/faq.html">FAQs</a>
</div>
<div onclick="SwitchMenu('menu_1.1.3', '../../../skin/')" id="menu_1.1.3Title" class="menutitle">Installation</div>
<div id="menu_1.1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/installation/index.html">Download</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/installation/subversion.html">Subversion Access</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/installation/source_version.html">Install Instructions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.4', '../../../skin/')" id="menu_1.1.4Title" class="menutitle">Concepts</div>
<div id="menu_1.1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/concepts/publication.html">Publication</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/documents.html">Working with Documents</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/urlMapping.html">URL Mapping</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/authoring_live.html">Authoring and Live mode</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/wysiwyg.html">WYSIWYG</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.5', '../../../skin/')" id="menu_selected_1.1.5Title" class="menutitle" style="background-image: url('../../../skin/images/chapter_open.gif');">Technical Reference</div>
<div id="menu_selected_1.1.5" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../../docs/1_4/reference/lenya-sitemaps.html">Overview of Lenya Sitemaps</a>
</div>
<div class="menupage">
<div class="menupagetitle">Access Control Specification</div>
<div class="menupageitemgroup">
<div class="menupageitem">
<a title="Access Control Specification" href="#ac-intro">Access Control Spec...</a>
</div>
<div class="menupageitem">
<a href="#Terminology">Terminology</a>
</div>
<div class="menupageitem">
<a title="We use the following names." href="#Names">We use the followin...</a>
</div>
<div class="menupageitem">
<a href="#Concept">Concept</a>
</div>
<div class="menupageitem">
<a title="Role resolving algorithm" href="#resolving">Role resolving algo...</a>
</div>
<div class="menupageitem">
<a href="#gui">User interface</a>
</div>
<div class="menupageitem">
<a href="#samples">Examples</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.3', '../../../skin/')" id="menu_1.1.5.3Title" class="menutitle">Usecase Framework</div>
<div id="menu_1.1.5.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/reference/usecase-framework/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/usecase-framework/abstractusecase.html">AbstractUsecase</a>
</div>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/publication-templating/index.html">Publication Templating</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/resource-types.html">Resource Types</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/modules/index.html">Modules</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/metadata.html">Meta data</a>
</div>
<div onclick="SwitchMenu('menu_1.1.5.8', '../../../skin/')" id="menu_1.1.5.8Title" class="menutitle">Protocols</div>
<div id="menu_1.1.5.8" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/lenya.html">lenya:</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/lenyadoc.html">lenyadoc:</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/site.html">error:site:</a>
</div>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/link-management.html">Link Management</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/notification.html">Notification</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/repository/index.html">Repository</a>
</div>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/index.html">1.4 API (Javadoc)</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://apachecon.com/"><img border="0" title="ApacheCon EU 2006" alt="ApacheCon EU 2006 - logo" src="http://www.eu.apachecon.com/konferenzen/apachecon06/images/header-left.gif" style="width: 150px;height: 50px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="ac.pdf"><img alt="PDF -icon" src="../../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Access Control Specification</h1>
    
<a name="N1000E"></a><a name="ac-intro"></a>
<h2 class="h3">Access Control Specification</h2>
<div class="section">
<ul>
        
<li>Possibility to deny permissions</li>
      
</ul>
</div>
    
<a name="N1001B"></a><a name="Terminology"></a>
<h2 class="h3">Terminology</h2>
<div class="section">
<ul>
        
<li>An accreditable is either a user, a group, an IP range, or the world.</li>
        
<li>A credential is an assignment of a role to an accreditable.</li>
      
</ul>
</div>
    
<a name="N1002B"></a><a name="Names"></a>
<h2 class="h3">We use the following names.</h2>
<div class="section">
<ul>
        
<li>n - a node</li>
        
<li>parent(n) - the parent node of n</li>
        
<li>n.c1, ..., n.ci - the credentials of the node n</li>
        
<li>acc(c) - the accreditable which the credential refers to</li>
        
<li>role(c) - the role which the credential assignes to the accreditable</li>
        
<li>method(c) - the method of the credential</li>
      
</ul>
</div>
    
<a name="N10047"></a><a name="Concept"></a>
<h2 class="h3">Concept</h2>
<div class="section">
<ul>
        
<li>Credential methods can be grant or deny.</li>
        
<li>The order of credentials at a node is important.</li>
        
<li>To find out if a certain accreditable a has a role r for the node n, use the following algorithm:
          <ul>
            
<li>Search for the first matching credential, starting with the first credential of the node n.</li>
            
<li>If no credential of n matches the accreditable, continue with the parent node.</li>
            
<li>When a credential is found which assigns the role r to the accreditable a, return the method of the credential.</li>
            
<li>When a credential is found which assigns the role r to the accreditable a, return the method of the credential.</li>
          
</ul>
        
</li>
      
</ul>
</div>
    
<a name="N10069"></a><a name="resolving"></a>
<h2 class="h3">Role resolving algorithm</h2>
<div class="section">
<ul>
        
<li>while not matched:
          <ul>
            
<li>for c : n.ci to n.c1: + if acc(c) = a and role(c) = r, return method(c)</li>
            
<li>n := parent(n)</li>
          
</ul>
        
</li>
        
<li>return deny</li>
      
</ul>
</div>
    
<a name="N10082"></a><a name="gui"></a>
<h2 class="h3">User interface</h2>
<div class="section">
<p>The user interface has to allow the following operations:</p>
<ul>
        
<li>add/remove credentials for users, groups, world</li>
        
<li>set the credential method</li>
        
<li>change credential order (move up/down)</li>
      
</ul>
</div>
    
<a name="N10098"></a><a name="samples"></a>
<h2 class="h3">Examples</h2>
<div class="section">
<p>Like stated above the order of the credential is important. Credentials are builded
        from policies. Imaginge you are trying to access
        http://localhost:8888/default/introduction.html </p>
<p>The defined policy (with highest priority) would be:
        config/ac/policies/introduction.html/subtree-policy.acml. Imaginge you have
        defined:</p>
<pre class="code">&lt;policy xmlns="http://apache.org/cocoon/lenya/ac/1.0"&gt;
  &lt;world&gt;
    &lt;role id="visit" method="deny"/&gt;
  &lt;/world&gt;
  &lt;group id="editor"&gt;
    &lt;role id="edit" method="grant"/&gt;
  &lt;/group&gt;
&lt;/policy&gt; </pre>
<p>Then you try to login in with user "lenya" who is in the editor group. However you will
        not be successful, because everybody always is world. Since the DENY of world is
        coming first nobody will now be able to see the page. Changing above policy to </p>
<pre class="code">&lt;policy xmlns="http://apache.org/cocoon/lenya/ac/1.0"&gt;
  &lt;group id="editor"&gt;
    &lt;role id="edit" method="grant"/&gt;
  &lt;/group&gt;
  &lt;world&gt;
    &lt;role id="visit" method="deny"/&gt;
  &lt;/world&gt;
&lt;/policy&gt; </pre>
<p>Let all user of the group editor access the page.</p>
<p>Best practise is to deny access early in a node tree of policies for e.g. WORLD.
        Meaning to define it e.g. in config/ac/policies/authoring/subtree-policy.acml</p>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2005 <a href="http://www.apache.org/licenses/LICENSE-2.0">The Apache Software Foundation.</a>
</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:dev@lenya.apache.org?subject=Feedback%C2%A0for%C2%A0docs/1_4/reference/ac.html">dev@lenya.apache.org</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
