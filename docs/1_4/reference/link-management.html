<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8">
<meta name="Forrest-skin-name" content="pelt">
<title>Link Management</title>
<link type="text/css" href="../../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../../skin/profile.css" rel="stylesheet">
<script src="../../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://lenya.apache.org/">lenya</a><script src="../../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="Lenya" src="../../../images/apache-lenya-light.png" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href=""></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="lenya.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with ');" size="25" name="q" id="query" type="text" value="Search the site with ">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../../../index.html">Project</a>
</li>
<li class="current">
<a class="selected" href="../../../docs/index.html">Documentation</a>
</li>
<li>
<a class="unselected" href="../../../community/index.html">Community</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs">
<a class="selected" href="../../../docs/1_4/index.html">Version 1.4</a><a class="unselected" href="../../../docs/modules/index.html">Modules</a><a class="unselected" href="../../../docs/1_2_x/index.html">Version 1.2</a>
</div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">

             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../../../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../../../skin/images/chapter_open.gif');">Version 1.4</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../../docs/1_4/index.html">Index</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/faq.html">FAQs</a>
</div>
<div onclick="SwitchMenu('menu_1.1.3', '../../../skin/')" id="menu_1.1.3Title" class="menutitle">Installation</div>
<div id="menu_1.1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/installation/index.html">Download</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/installation/subversion.html">Subversion Access</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/installation/source_version.html">Install Instructions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.4', '../../../skin/')" id="menu_1.1.4Title" class="menutitle">Tutorials</div>
<div id="menu_1.1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/tutorials/setupide/index.html">Setting up Eclipse</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/tutorials/tests.html">Writing Tests</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/tutorials/bestpractises.html">Best Practises</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5', '../../../skin/')" id="menu_1.1.5Title" class="menutitle">Concepts</div>
<div id="menu_1.1.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/concepts/publication.html">Publication</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/documents.html">Working with Documents</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/urlMapping.html">URL Mapping</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/authoring_live.html">Authoring and Live mode</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/concepts/wysiwyg.html">WYSIWYG</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.6', '../../../skin/')" id="menu_selected_1.1.6Title" class="menutitle" style="background-image: url('../../../skin/images/chapter_open.gif');">Technical Reference</div>
<div id="menu_selected_1.1.6" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../../docs/1_4/reference/lenya-sitemaps.html">Overview of Lenya Sitemaps</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/repository/index.html">Repository</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/ac.html">Access Control Specification</a>
</div>
<div onclick="SwitchMenu('menu_1.1.6.4', '../../../skin/')" id="menu_1.1.6.4Title" class="menutitle">Usecase Framework</div>
<div id="menu_1.1.6.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/reference/usecase-framework/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/usecase-framework/abstractusecase.html">AbstractUsecase</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.6.5', '../../../skin/')" id="menu_1.1.6.5Title" class="menutitle">Publications</div>
<div id="menu_1.1.6.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/reference/publication/configuration.html">Configuration</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/publication/publication-templating/index.html">Publication Templating</a>
</div>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/resource-types.html">Resource Types</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/modules/index.html">Modules</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/metadata.html">Meta data</a>
</div>
<div onclick="SwitchMenu('menu_1.1.6.9', '../../../skin/')" id="menu_1.1.6.9Title" class="menutitle">Protocols</div>
<div id="menu_1.1.6.9" class="menuitemgroup">
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/lenya.html">lenya Protocol</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/lenyadoc.html">lenyadoc Protocol</a>
</div>
<div class="menuitem">
<a href="../../../docs/1_4/reference/protocols/site.html">site Protocol</a>
</div>
</div>
<div class="menupage">
<div class="menupagetitle">Link Management</div>
<div class="menupageitemgroup">
<div class="menupageitem">
<a href="#Introduction">Introduction</a>
</div>
<div class="menupageitem">
<a title="Syntax for Internal Links" href="#Syntax+for+Internal+Links">Syntax for Internal...</a>
</div>
<div class="menupageitem">
<a href="#HTML+Links">HTML Links</a>
</div>
<div class="menupageitem">
<a title="Specifying the Resource Type Format" href="#Specifying+the+Resource+Type+Format">Specifying the Reso...</a>
</div>
</div>
</div>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/index.html">Core API</a>
</div>
<div onclick="SwitchMenu('menu_1.1.8', '../../../skin/')" id="menu_1.1.8Title" class="menutitle">Module APIs</div>
<div id="menu_1.1.8" class="menuitemgroup">
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/ac-impl/index.html">ac-impl</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/administration/index.html">administration</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/cache/index.html">cache</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/cforms/index.html">cforms</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/contacform/index.html">contactform</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/defaultusecases/index.html">defaultusecases</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/editors/index.html">editors</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/export/index.html">export</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/fckeditor/index.html">fckeditor</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/jackrabbit/index.html">jackrabbit</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/janitor/index.html">janitor</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/jcr/index.html">jcr</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/kupu/index.html">kupu</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/ldap/index.html">ldap</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/lenyadoc/index.html">lenyadoc</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/linkcheck/index.html">linkcheck</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/linking/index.html">linking</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/lucene/index.html">lucene</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/notification/index.html">notification</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/observation-impl/index.html">observation-impl</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/opendocument/index.html">opendocument</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/properties/index.html">properties</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/repository/index.html">repository</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/resource/index.html">resource</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/sitemanagement/index.html">sitemanagement</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/sitetree/index.html">sitetree</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/sourcerepository/index.html">sourcerepository</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/templating-impl/index.html">templating-impl</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/tinymce/index.html">tinymce</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/usecase/index.html">usecase</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/usecase-impl/index.html">usecase-impl</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/usecasedocument/index.html">usecasedocument</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/webdav/index.html">webdav</a>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.4/modules/workflow-impl/index.html">workflow-impl</a>
</div>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://apachecon.com/2007/EU/"><img border="0" title="ApacheCon Europe 2007" alt="ApacheCon Europe 2007 - logo" src="http://apache.org/ads/ApacheCon/2007-europe-125x125.png" style="width: 125px;height: 125px;"></a><a href="http://people.apache.org/calendar.html#200711"><img border="0" title="ApacheCon US 2007" alt="ApacheCon US 2007 - logo" src="http://apache.org/ads/ApacheCon/2007-usa-125x125.png" style="width: 125px;height: 125px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="link-management.pdf"><img alt="PDF -icon" src="../../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Link Management</h1>
    
    
<a name="N1000D"></a><a name="Introduction"></a>
<h2 class="h3">Introduction</h2>
<div class="section">
<p>Link Managements deals with internal links, i.e. documents
        that refer to other documents within the same publication. In Lenya 1.2, links
        are rewritten each time the URL of the target document changes (see
        section <a href="../../../docs/1_2_x/components/link-management/link-management.html">Link Management</a> in the Lenya 1.2 documentation).
      </p>
<p>
        In Lenya 1.4, documents are identified and referenced using
        <acronym title="Universally Unique Identifier">UUID</acronym>s.
        The UUID of a document never changes, that's why the internal
        links don't have to be rewritten when a document is moved
        in the site structure.
     </p>
</div>
    
    
<a name="N10022"></a><a name="Syntax+for+Internal+Links"></a>
<h2 class="h3">Syntax for Internal Links</h2>
<div class="section">
<p>
        Internal links have the following syntax:
      </p>
<pre class="code">lenya-document:{uuid}[,lang={&hellip;}][,pub={&hellip;}][,area={&hellip;}][,rev={&hellip;}][{queryString}]</pre>
<ul>
        
<li>The <span class="codefrag">{uuid}</span> value is mandatory.</li>
        
<li>
          The parameters <span class="codefrag">lang</span>, <span class="codefrag">pub</span>, <span class="codefrag">area</span>,
          and <span class="codefrag">rev</span> are optional. If omitted, the corresponding values
          of the current context and the latest revision are used.
        </li>
        
<li>
          The optional query string is not evaluated when resolving the link target.
          It can be used to provide information for subsequent processing
          steps (e.g., the <span class="codefrag">UuidToUrlTransformer</span>) and to add request
          parameters to the resulting HTTP link URL. The query string is separated
          from the link URL using a question mark.
        </li>
      
</ul>
<p>Some link URI examples:</p>
<ul>
        
<li>
<span class="codefrag">lenya-document:031b21e0-d898-11db-b5f3-e5afac0e35a0</span> - document in same language</li>
        
<li>
<span class="codefrag">lenya-document:031b21e0-d898-11db-b5f3-e5afac0e35a0,lang=de</span> - document in different language</li>
        
<li>
<span class="codefrag">lenya-document:031b21e0-d898-11db-b5f3-e5afac0e35a0,area=trash</span> - document in different area</li>
        
<li>
<span class="codefrag">lenya-document:031b21e0-d898-11db-b5f3-e5afac0e35a0?uuid2url.extension=rss</span> - HTML link should use a particular extension</li>
        
<li>
<span class="codefrag">lenya-document:031b21e0-d898-11db-b5f3-e5afac0e35a0?lenya.usecase=bxe.edit</span> - HTML link with request parameter</li>
      
</ul>
</div>
    
    
<a name="N1006D"></a><a name="HTML+Links"></a>
<h2 class="h3">HTML Links</h2>
<div class="section">
<p>
        The <span class="codefrag">UuidToUrlTransformer</span> is responsible for translating <span class="codefrag">lenya-document:</span>
        links into the corresponding HTML links which can be understood by the browser.
      </p>
<p>
        If your source document contains a link like this:
      </p>
<pre class="code">&lt;a href="lenya-document:031&hellip;"&gt;News&lt;/a&gt;</pre>
<p>
        and your pipeline contains a call to the <span class="codefrag">UuidToUrlTransformer</span>:
      </p>
<pre class="code">&lt;map:transform type="uuid2url"/&gt;</pre>
<p>
        the resulting HTML link will look like this:
      </p>
<pre class="code">&lt;a href="/default/authoring/news.html"&gt;News&lt;/a&gt;</pre>
<a name="N10094"></a><a name="Specifying+an+Extension"></a>
<h3 class="h4">Specifying an Extension</h3>
<p>
          The <span class="codefrag">UuidToUrlTransformer</span> recognizes the query string parameter
          <span class="codefrag">uuid2url.extension</span>. You can use it to force a specific extension.
          For instance
        </p>
<pre class="code">&lt;a type="application/rss+xhtml" href="lenya-document:031&hellip;?uuid2url.extension=rss"&gt;RSS Feed&lt;/a&gt;</pre>
<p>
          will result in
        </p>
<pre class="code">&lt;a type="application/rss+xhtml" href="/default/authoring/news.rss"&gt;RSS Feed&lt;/a&gt;</pre>
</div>
    
    
<a name="N100B0"></a><a name="Specifying+the+Resource+Type+Format"></a>
<h2 class="h3">Specifying the Resource Type Format</h2>
<div class="section">
<p>
        Sometimes you want to specify the format of the link target. This can be done using the
        <span class="codefrag">format</span> parameter. A typical use case is the inclusion via CInclude.
      </p>
<p>
        Imagine you're converting a collection of documents to a list of teasers.
        The collection source might look like this:
      </p>
<pre class="code">&lt;col:collection&gt;
  &lt;col:document uuid="031&hellip;"/&gt;
  &lt;col:document uuid="a5r&hellip;"/&gt;
  &hellip;
&lt;/col:collection&gt;</pre>
<p>
        You could use the following XSLT template to generate the CInclude statements for the
        teaser list:
      </p>
<pre class="code">&lt;xsl:template match="col:document"&gt;
  &lt;ci:include src="lenya-document:{@uuid}?format=teaser"/&gt;
&lt;/xsl:template&gt;</pre>
<p>
        When the resulting XML is processed by
      </p>
<pre class="code">&lt;map:transform type="cinclude"/&gt;</pre>
<p>the teaser version of each document will be included.</p>
</div>
    
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2005 <a href="http://www.apache.org/licenses/LICENSE-2.0">The Apache Software Foundation.</a>
</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:dev@lenya.apache.org?subject=Feedback%C2%A0for%C2%A0docs/1_4/reference/link-management.html">dev@lenya.apache.org</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
