<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>Part 2: Installing Lenya</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://lenya.apache.org/">lenya</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="Lenya" src="../../images/apache-lenya-light.png" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href=""></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="lenya.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with ');" size="25" name="q" id="query" type="text" value="Search the site with ">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="base-not-selected" href="../../index.html">Project</a>
</li>
<li>
<a class="base-not-selected" href="../../1_4/index.html">Version 1.4</a>
</li>
<li>
<a class="base-not-selected" href="../../modules/index.html">Modules</a>
</li>
<li class="current">
<a class="base-selected" href="../../1_2_x/index.html">Version 1.2</a>
</li>
<li>
<a class="base-not-selected" href="../../community/index.html">Community</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Version 1.2</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../1_2_x/index.html">Index</a>
</div>
<div onclick="SwitchMenu('menu_1.1.2', '../../skin/')" id="menu_1.1.2Title" class="menutitle">Installation</div>
<div id="menu_1.1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/installation/index.html">Download</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/installation/subversion.html">Subversion Access</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/installation/source_version.html">Install Instructions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.3', '../../skin/')" id="menu_selected_1.1.3Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Tutorial</div>
<div id="menu_selected_1.1.3" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../1_2_x/tutorial/index.html">Introduction</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/tutorial/understanding_lenya.html">1. Understanding Lenya</a>
</div>
<div class="menupage">
<div class="menupagetitle">2. Installing Lenya</div>
<div class="menupageitemgroup">
<div class="menupageitem">
<a href="#Requirements">Requirements</a>
</div>
<div class="menupageitem">
<a title="10 Steps to Lenya bliss" href="#tensteps">10 Steps to Lenya b...</a>
</div>
<div class="menupageitem">
<a href="#next_article">Next Article</a>
</div>
</div>
</div>
<div class="menuitem">
<a href="../../1_2_x/tutorial/anatomy_of_the_pipeline.html">3. Anatomy of the Pipeline</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/tutorial/editing_in_lenya.html">4. Editing in Lenya</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/tutorial/custom_navigation.html">5. Custom Navigation in Lenya</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/tutorial/mod_proxy_and_lenya.html">6a. Mod Proxy and Lenya</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/tutorial/mod_proxy_and_lenya_continued.html">6b. Mod Proxy and Lenya</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.4', '../../skin/')" id="menu_1.1.4Title" class="menutitle">How-To</div>
<div id="menu_1.1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/how-to/faq.html">FAQ</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/new_publication.html">New Publication</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/deploy_publication.html">Deploy Publication</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/look_and_feel.html">Look and Feel</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/custom_resourcetype.html">Custom Resource Type</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/new_mime_type.html">Adding Mime Types</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/site_navigation.html">Site Navigation</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/ldap_authentication.html">LDAP Authentication</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/cms_menus.html">CMS Menus</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/cms_screens.html">CMS Screens</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/search.html">Search Publications</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/how-to/external_data.html">External Data</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5', '../../skin/')" id="menu_1.1.5Title" class="menutitle">Components</div>
<div id="menu_1.1.5" class="menuitemgroup">
<div onclick="SwitchMenu('menu_1.1.5.1', '../../skin/')" id="menu_1.1.5.1Title" class="menutitle">Access&nbsp;Control</div>
<div id="menu_1.1.5.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/terms.html">Basic Terms</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/accesscontrollers.html">Access&nbsp;Controllers</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/accesscontrollerresolvers.html">Access Controller Resolvers</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/authenticators.html">Authenticators</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/authorizers.html">Authorizers</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/policymanagers.html">Policies and Policy&nbsp;Managers</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/accreditablemanagers.html">Accreditable&nbsp;Managers</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/accesscontrol/ssl.html">SSL Encryption</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.2', '../../skin/')" id="menu_1.1.5.2Title" class="menutitle">Authoring</div>
<div id="menu_1.1.5.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/authoring/adding-document-creator.html">Adding a new document creator</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/authoring/image-upload.html">Image Upload</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/authoring/openoffice.html">OpenOffice</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.3', '../../skin/')" id="menu_1.1.5.3Title" class="menutitle">Deployment</div>
<div id="menu_1.1.5.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/deployment/proxying.html">Proxying</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.4', '../../skin/')" id="menu_1.1.5.4Title" class="menutitle">Editors</div>
<div id="menu_1.1.5.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/editors/htmlform.html">HTML Form Editor</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/editors/1form.html">HTML One Form Editor</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/editors/bxe.html">Bitflux Editor</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/editors/kupu.html">Kupu</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/editors/xopus.html">Xopus</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.5', '../../skin/')" id="menu_1.1.5.5Title" class="menutitle">Layout</div>
<div id="menu_1.1.5.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/layout/navigation.html">Navigation</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/layout/xhtml-templating.html">XHTML templating</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/layout/static-resources.html">Serving static resources</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/layout/lenya-menubar.html">Lenya Menubar</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.6', '../../skin/')" id="menu_1.1.5.6Title" class="menutitle">Publication</div>
<div id="menu_1.1.5.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/publication/pageenvelopemodule.html">PageEnvelopeModule</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/publication/siteTree.html">Site tree</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.7', '../../skin/')" id="menu_1.1.5.7Title" class="menutitle">Resource&nbsp;Types</div>
<div id="menu_1.1.5.7" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/resource-types/resource-types.html">Resource&nbsp;Types</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.8', '../../skin/')" id="menu_1.1.5.8Title" class="menutitle">Revision Control</div>
<div id="menu_1.1.5.8" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/revisioncontrol/revisioncontroller.html">Revision Controller</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/revisioncontrol/rcml.html">RCML</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/revisioncontrol/checkin.html">Check In</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/revisioncontrol/checkout.html">Check Out</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/revisioncontrol/version.html">Revisions</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/revisioncontrol/rollback.html">Rollback</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.9', '../../skin/')" id="menu_1.1.5.9Title" class="menutitle">Repository</div>
<div id="menu_1.1.5.9" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/repository/index.html">WebDAV Servers</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.10', '../../skin/')" id="menu_1.1.5.10Title" class="menutitle">Search</div>
<div id="menu_1.1.5.10" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/search/lucene.html">Searching with Lucene</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.11', '../../skin/')" id="menu_1.1.5.11Title" class="menutitle">URI Handling</div>
<div id="menu_1.1.5.11" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/uri-handling/URIParametrizer.html">URI Parametrizer</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/uri-handling/standardURI.html">URI Scheme</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/uri-handling/usecases.html">Usecases</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.12', '../../skin/')" id="menu_1.1.5.12Title" class="menutitle">Asset Management</div>
<div id="menu_1.1.5.12" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/asset-management/management.html">Asset Management</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.13', '../../skin/')" id="menu_1.1.5.13Title" class="menutitle">Link Management</div>
<div id="menu_1.1.5.13" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/link-management/link-management.html">Link Management</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.14', '../../skin/')" id="menu_1.1.5.14Title" class="menutitle">Meta Data</div>
<div id="menu_1.1.5.14" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/metadata/metadata.html">Meta Data Handling</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.15', '../../skin/')" id="menu_1.1.5.15Title" class="menutitle">Multilingual Documents</div>
<div id="menu_1.1.5.15" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/multilingual/multilingual.html">Multilingual Document Handling</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.16', '../../skin/')" id="menu_1.1.5.16Title" class="menutitle">Tasks</div>
<div id="menu_1.1.5.16" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/tasks/concept.html">The Task Concept</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/defining.html">Defining Tasks</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/taskaction.html">The TaskAction</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/scheduling.html">Scheduling a Task</a>
</div>
<div onclick="SwitchMenu('menu_1.1.5.16.5', '../../skin/')" id="menu_1.1.5.16.5Title" class="menutitle">Included tasks</div>
<div id="menu_1.1.5.16.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/tasks/anttask.html">AntTask</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/publisher.html">DefaultFilePublisher</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/exporter.html">StaticHTMLExporter</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/mailtask.html">MailTask</a>
</div>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/tasks/development.html">Developing Tasks</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.17', '../../skin/')" id="menu_1.1.5.17Title" class="menutitle">Workflow</div>
<div id="menu_1.1.5.17" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/workflow/terms.html">Terms</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/workflow/state-machine.html">The State Machine</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/workflow/configuration.html">Configuration</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/workflow/implementation.html">Implementation</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.5.18', '../../skin/')" id="menu_1.1.5.18Title" class="menutitle">Site Management</div>
<div id="menu_1.1.5.18" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/archive.html">Archive</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/copy.html">Copy</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/deactivate.html">Deactivate</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/delete.html">Delete</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/deletetrash.html">Delete the trash</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/move.html">Move</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/moveupdown.html">Move Up/Down</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/rename.html">Rename</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/components/sitemanagement/restore.html">Restore</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.6', '../../skin/')" id="menu_1.1.6Title" class="menutitle">Miscellaneous</div>
<div id="menu_1.1.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../1_2_x/misc/namespaces.html">Namespaces</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/misc/coding-guidelines.html">Coding Guidelines</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/misc/reserved_names.html">Reserved Names</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/misc/unittests.html">Unit Tests</a>
</div>
<div class="menuitem">
<a href="../../1_2_x/misc/xinclude-processor.html">XInclude Processor</a>
</div>
</div>
<div class="menuitem">
<a href="../../../apidocs/1.2/index.html">1.2 API (Javadoc)</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://apachecon.com/"><img border="0" title="ApacheCon EU 2006" alt="ApacheCon EU 2006 - logo" src="http://www.eu.apachecon.com/konferenzen/apachecon06/images/header-left.gif" style="width: 150px;height: 50px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="installing_lenya.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Part 2: Installing Lenya</h1>

<p>So here you are, ready to install the mysterious Lenya. If you haven't already, we encourage
    you to take a quick gander at
    <a href="understanding_lenya.html">Part I: Understanding Lenya</a>
    to make sure you know what you are getting into before attempting this install. Also, some
    knowledge in the basics of using a UNIX/Linux operating system are assumed. So without
    further delay, let's kick it!</p>


<a name="N10015"></a><a name="Requirements"></a>
<h2 class="h3">Requirements</h2>
<div class="section">
<p>OK, we do have to mention one thing: while you can install Lenya on Windows, I'm going to be
    taking you through a Linux installation. For Windows help, I'll have to direct you to the
    <a href="../../community/mailing-lists.html">user mailing
        lists</a>.</p>
<p>We also recommend a broadband connection, especially for downloading Cocoon (approx. 43
    MB) and the Java SDK (approx. 35 MB), but if you want to sit around and wait while they
    download on a phone line, be our guest!</p>
<ol>
  
<li>Linux/UNIX (I'm using <a href="http://www.redhat.com/software/rhel/as/">RedHat Enterprise AS</a>, but any Linux will do)</li>
  
<li>
<a href="http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&PartDetailId=j2sdk-1.4.2_07-oth-JPR&SiteId=JSC&TransactionId=noreg">Java 1.4.2 SDK</a>  (we downloaded the RedHat RPM)</li>

  
<li>
<a href="http://cocoon.apache.org/mirror.cgi">Cocoon 2.1.7</a>  (the TAR/GZ source version)</li>
  
<li>
<a href="http://www.apache.org/dyn/closer.cgi/lenya">Lenya 1.2.4</a>  (the tar.gz source version is what we are using, under the SOURCES directory)</li>
  
<li>(optional) <a href="http://jakarta.apache.org/site/binindex.cgi#tomcat-5.0">Tomcat 5.0.28</a>  (the binary tar.gz version)</li>

</ol>
<p>Why is Tomcat optional? Well, because Lenya already comes with a servlet container called
    Jetty. Both Jetty and Tomcat are the servlet containers tested with Lenya, and since we're
    using Tomcat for Hiram's site, that's what I'll be taking you through. For brief
    instructions on using Jetty, read
    <a href="../../1_2_x/installation/source_version.html">the
        tutorial on Lenya's site</a>.</p>
<p>It's also assumed that the first steps before switching to our new user in step 5 are done with
    a user that has the capabilities of installing Java and the like. We used the root user to do
    the installs and moves, then switched to the our new user for the rest.</p>
</div>

<a name="N10052"></a><a name="tensteps"></a>
<h2 class="h3">10 Steps to Lenya bliss</h2>
<div class="section">
<a name="N10057"></a><a name="download"></a>
<h3 class="h4">Step 1: Download!</h3>
<p>Yeah, seems simple enough, doesn't it? Get 2-5 from above downloaded and on the server
    you'll be using.</p>
<a name="N10060"></a><a name="installsdk"></a>
<h3 class="h4">Step 2: Install Java SDK</h3>
<p>If you downloaded the RPM, you'll need to execute the file first. It spits out the
        Licensing Agreement, for which you must agree to, and then your RPM file is ready. To
        install on RedHat, type in the following:</p>
<pre class="code">rpm -ivh j2sdk-1_4_2_07-linux-i586.rpm</pre>
<p>or whatever your RPM file happens to be named. This should install your Java files in
        /usr/java/ by default. You'll also need to setup some environment variables for Java
        in order for Tomcat to start up correctly later on. Again, these instructions are for
        RedHat, so consult documentation for your OS if need be.</p>
<pre class="code">cd /etc/profile.d/</pre>
<p>Create a new file called java.sh and fill it with the following for now:</p>
<pre class="code"> export JAVA_HOME=/usr/java/java export PATH=$PATH:$JAVA_HOME/bin export
        CLASSPATH=$JAVA_HOME/lib:$JAVA_HOME/jre/lib/ext
    </pre>
<p>Save it and exit from the file. While we are here, let's add the rest of the environment
        variables for the other applications. So, for Tomcat, create a new file called
        tomcat.sh and add the following inside:</p>
<pre class="code"> export CATALINA_HOME=/usr/local/tomcat export
        PATH=$PATH:$CATALINA_HOME/bin
    </pre>
<p>Save and exit. Then, create a new file called webapps.sh and add the following
        inside:</p>
<pre class="code"> export LENYA_HOME=/home/webapp/web_software/lenya-1.2.4 export
        COCOON_HOME=/home/webapp/web_software/cocoon-2.1.7 export
        COCOON_WEBAPP=/home/webapp/web_software/cocoon-2.1.7/build/webapp
    </pre>
<p>Save and exit.</p>
<a name="N1008C"></a><a name="setup_a_new_user"></a>
<h3 class="h4">Step 3: Setup a new user</h3>
<p>You'll want to create a new user that has access to all of the Cocoon, Tomcat, and Lenya files.
    I'll call the user "webapp". In most Linux distributions, you can use the graphical tools
    to add a new user, or if you are a die-hard command-line junkie, use the following command in
    RedHat to add our new user:</p>
<pre class="code">useradd -c "Web Applications" -m webapp</pre>
<p>This basically sets up a new user with the name of "Web Applications", a username of "webapp"
    and creates a home directory (the -m switch) with the standard initialization files.</p>
<p>You may want to setup a password for this user.  To do that, simply do this:</p>
<pre class="code">passwd webapp</pre>
<p>It will prompt you for the new password twice. Assuming you typed it in the same way both
    times, you're all set! This is only basic, so if you want to add password expiration
    options, etc., go right ahead!</p>
<a name="N100A6"></a><a name="move_downloads_to_right_places"></a>
<h3 class="h4">Step 4: Move downloads to right places</h3>
<p>In most UNIX/Linux systems, webapp's home directory should be /home/webapp/. Inside
    webapp's home directory, we'll create a new directory to store our source files. Let's
    call it "web_software":</p>
<pre class="code">
mkdir /home/webapp/web_software
chown -R webapp:webapp /home/webapp/web_software
</pre>
<p>Go ahead and move both Lenya's and Cocoon's zipped up files to that directory (you'll have to
    change to the directory that your downloaded files are stored first):</p>
<pre class="code">
mv apache-lenya-1.2.4-src.tar.gz /home/webapp/web_software/
mv cocoon-2.1.7-src.tar.gz /home/webapp/web_software/
</pre>
<p>Tomcat needs to go in /usr/local/ (at least that's the typical place for it):</p>
<pre class="code">mv jakarta-tomcat-5.0.28.tar.gz /usr/local/</pre>
<a name="N100C1"></a><a name="change_permissions_of_files"></a>
<h3 class="h4">Step 5: Change permissions of files</h3>
<p>Now that you created that webapp user, you'll want to assign permissions to the Lenya,
    Cocoon, and Tomcat files to webapp:</p>
<pre class="code">
chown webapp:webapp /usr/local/jakarta-tomcat-5.0.28.tar.gz
chown -R webapp:webapp /home/webapp/web_software/

</pre>
<p>And then switch to that user:</p>
<pre class="code">su - webapp</pre>
<a name="N100D5"></a><a name="unzip_lenya"></a>
<h3 class="h4">Step 6: Unzip Lenya</h3>
<p>Pretty easy stuff:</p>
<pre class="code">
cd web_software
tar xzvf apache-lenya-1.2.4-src.tar.gz

mv apache-lenya-1.2.4-src lenya-1.2.4
</pre>
<a name="N100E2"></a><a name="unzip_and_build_cocoon"></a>
<h3 class="h4">Step 7: Unzip and build Cocoon</h3>
<p>Same deal here:</p>
<pre class="code">
tar xzvf cocoon-2.1.7-src.tar.gz
mv cocoon-2.1.7-src cocoon-2.1.7
</pre>
<p>Now, you'll need to copy some config files from Lenya into Cocoon's directory:</p>
<pre class="code">
cp lenya-1.2.4/local.build.properties cocoon-2.1.7/
cp lenya-1.2.4/local.blocks.properties cocoon-2.1.7/
</pre>
<p>Then the all-important part, compiling Cocoon.  It's this simple:</p>
<pre class="code">
cd cocoon-2.1.7
./build.sh -Dinclude.webapp.libs=yes webapp
</pre>
<a name="N100FD"></a><a name="install_tomcat"></a>
<h3 class="h4">Step 8: Install Tomcat</h3>
<p>Since we downloaded the binary version of Tomcat, there's not much to do except to unzip the files.  So here we go again:</p>
<pre class="code">
cd /usr/local/
tar xzvf jakarta-tomcat-5.0.28.tar.gz
</pre>
<p>Since that name is rather long, let's create a link to it:</p>
<pre class="code">ln -s jakarta-tomcat-5.0.28 tomcat</pre>
<a name="N10111"></a><a name="configure_and_install_lenya"></a>
<h3 class="h4">Step 9: Configure and install
    Lenya</h3>
<p>OK, we need to let Lenya know where Tomcat is before we install it.</p>
<pre class="code"> cd /home/webapp/web_software/lenya-1.2.4/ cp build.properties
        local.build.properties
        </pre>
<p>Inside this file, you'll need to change a couple of things. Below are the lines you'll
        need to change in local.build.properties, so scope them out in the file, make the
        changes, and save them:</p>
<pre class="code"> cocoon.src.dir=../cocoon-2.1.7 tomcat.home.dir=/usr/local/tomcat
        enable.uploads=true
        </pre>
<p>Once done, we'll need to compile:</p>
<pre class="code">./build.sh install</pre>
<a name="N1012C"></a><a name="start_up_tomcat"></a>
<h3 class="h4">Step 10: Start up Tomcat</h3>
<p>To start Tomcat, simply type in the following:</p>
<pre class="code">/usr/local/tomcat/bin/startup.sh</pre>
<a name="N10139"></a><a name="getting_your_first_access_to_lenya"></a>
<h3 class="h4">Getting your first access to Lenya</h3>
<p>Now that Tomcat is up, you should be able to access Lenya pretty easily. Just go to the
    following URL: http://your.server.url:8080/lenya/. You should see a couple of
    publications listed on the left with general information about Lenya. From there, you can
    log into the Default Publication with the username "lenya" and the password "levi".</p>
</div>

<a name="N10143"></a><a name="next_article"></a>
<h2 class="h3">Next Article</h2>
<div class="section">
<p>Now that you have the basic installation done, play around and have some fun. In the next
    article, we'll take a look at how pages are created, published, and customized by changing
    some of the files in the Default Publication as well as creating our own pipeline.</p>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2005 <a href="http://www.apache.org/licenses/LICENSE-2.0">The Apache Software Foundation.</a>
</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:dev@lenya.apache.org?subject=Feedback%C2%A0for%C2%A01_2_x/tutorial/installing_lenya.html">dev@lenya.apache.org</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
