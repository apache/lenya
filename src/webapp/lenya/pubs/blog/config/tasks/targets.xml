<?xml version="1.0" encoding="UTF-8"?>

<project name="Ant Test Project" default="test" basedir=".">

<!-- Common Properties -->
<property name="pub.dir" value=""/>
<property name="pub.id" value=""/>

<!-- Publishing Properties -->
<property name="authoring.dir" value="content/authoring"/>
<property name="live.dir" value="content/live"/>

<property name="export.server-port" value=""/>
<property name="export.context-path" value=""/>
<property name="export.expression" value="/lenya/blog/live/"/>
<property name="export.replacement" value="/"/>
<property name="export.dir" value="work/export/pending"/>

<!-- Input from Publishing Screen -->
<property name="publish.sources" value=""/>
<property name="export.uris" value=""/>
<!-- /Input from Publishing Screen -->
<!-- /Publishing Properties -->





<target name="publish">
  <echo>Start publish</echo>
  <echo>Publication Directory : ${pub.dir}</echo>


  <echo>Copy source (XML) files</echo>
  <echo>Files to copy: ${publish.sources}</echo>
  <echo>Authoring Directory: ${authoring.dir}</echo>
  <echo>Live Directory: ${live.dir}</echo>
  <copy todir="${pub.dir}/${live.dir}">
    <fileset dir="${pub.dir}/${authoring.dir}">
      <include name="${publish.sources}"/> <!-- NOTE: Need to be relative paths, e.g. levi/index.xml:vanya/index.xml -->
    </fileset>
  </copy>


  <echo>Export page as static HTML</echo>
  <echo>Pages to export: ${export.uris}</echo>
  <taskdef name="export" classname="org.apache.lenya.cms.ant.StaticHTMLExporter"/>
  <export
    server="http://127.0.0.1:${export.server-port}${export.context-path}/${pub.id}/live/"
    uris="${export.uris}"
    expression="${export.expression}"
    replacement="${export.replacement}"
    path="${export.dir}"
  />

  <echo>End publish</echo>
</target>

</project>
