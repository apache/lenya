<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : workflow.xml
    Created on : 8. April 2003, 19:02
    Author     : andreas
    Description:
        Purpose of the document follows.
-->

<workflow xmlns="http://apache.org/cocoon/lenya/workflow/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://apache.org/cocoon/lenya/workflow/1.0
        ../../../resources/entities/workflow/workflow.xsd">

  <state id="authoring" initial="true"/>
  <state id="review"/>
  <state id="live"/>
  <state id="trash"/>
  <state id="archive"/>
  
  <variable name="is_live" value="false"/>
  
  <transition source="authoring" destination="review">
    <event id="submit"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">edit</condition>
  </transition>
        
  <transition source="review" destination="live">
    <event id="publish"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">review</condition>
    <assign variable="is_live" value="true"/>
  </transition>
        
  <transition source="review" destination="authoring">
    <event id="reject"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">review</condition>
  </transition>
        
  <transition source="live" destination="authoring">
    <event id="edit"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">edit</condition>
  </transition>
        
  <transition source="authoring" destination="authoring">
    <event id="edit"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">edit</condition>
  </transition>
        
  <transition source="live" destination="authoring">
    <event id="deactivate"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">review</condition>
    <assign variable="is_live" value="false"/>
  </transition>

  <transition source="authoring" destination="trash">
    <event id="delete"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">edit</condition>
    <assign variable="is_live" value="false"/>
  </transition>

  <transition source="authoring" destination="archive">
    <event id="archive"/>
    <condition class="org.apache.lenya.cms.workflow.RoleCondition">edit</condition>
    <assign variable="is_live" value="false"/>
  </transition>        
</workflow>
