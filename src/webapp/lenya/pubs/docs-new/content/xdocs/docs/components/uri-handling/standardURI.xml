<?xml version="1.0"?>
<!--
  Copyright 1999-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!-- $Id: standardURI.xml,v 1.2 2004/03/13 12:42:06 gregor Exp $ -->

<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">
<document> 
  <header> 
    <title>URI Scheme</title>
    <version major="0" minor="2">Version 0.2</version>
    <authors><person name="Christian Egli" email="christian.egli@wyona.org"/>
      <person name="Felix Maeder" email="felix.maeder@wyona.com"/>
    </authors> 
    <abstract>Proposal for a standardization of URIs which are used
      for CMS functionality. </abstract> 
  </header> 
  <body> 

    <section>
      <title>Introduction</title>
      <p>We want to standardize CMS functionality across different
      publications so that we can consolidate them in a standard root
      sitemap.</p>

      <p>In order to achieve this one precondition is to standardize
      on the URIs how the CMS functionality is invoked.</p>

      <p>There are different ways to achieve this. We either reserve
      part of the URI space (e.g. /lenya/foo) or we reserve part of
      the request parameter space (e.g. /foo?lenya=bar)</p>

      <section>
	<title>Dynamic URIs</title>

	<p>We decided to go mostly for the second solution so that we
	  can leave the URI space as required by the publication and use
	  request parameters to invoke CMS actions.</p>

	<p>We define two standard request parameters which we use to
	  invoke all CMS actions in a standard way:</p>
	<dl>
	  <dt><code>lenya.usecase</code></dt>
	  <dd>The name of the use case, e.g. "publish"</dd>
	  <dt><code>lenya.step</code></dt>
	  <dd>Each use case can have multiple steps,
	    e.g. "showscreen"</dd> 
	</dl>
        <p>
        For further information about usecases, see section <link href="usecases.html">Usecases</link>.
        </p>
      </section>
      
      <section>
	<title>Static URIs</title>

	<p>There are also some static URIs that are needed for the Lenya
	  CMS. They are mostly internal pipelines for resources such as
	  the menu, css or support files for Xopus and Bitflux
	  editors.</p>

	<p>There is currently no consistent standard as to under which
	  URI space these resources should be located. Some are
	  residing in <code>/xopus/**</code> or
	  <code>/bitflux/**</code> and others are in
	  <code>/lenya/**</code>.</p>
	
      </section>
    </section>

    <section id="uri_definition">
      <title>URI definition</title>
      
      <p>Given the URI
      <code>/lenya/computerworld/authoring/news/foo.html</code> we
      define the following parts:</p>
      <table>
	<tr>
	  <th>URI fragment</th>
	  <th>Name</th>
	</tr>
	<tr>
	  <td>lenya</td>
	  <td><code>context-prefix</code></td>
	</tr>
	<tr>
	  <td>computerworld</td>
	  <td><code>publication-id</code></td>
	</tr>
	<tr>
	  <td>authoring</td>
	  <td><code>area</code></td>
	</tr>
	<tr>
	  <td>news/foo</td>
	  <td><code>document-id</code></td>
	</tr>
      </table>
    </section>

    <section>
      <title>Static URIs</title>

      <p>Currently different fragments of the URI space are reserved
	(e.g. <code>/xopus/**</code>, <code>/bitflux/**</code> and
	everything under <code>/lenya/**</code> that hasn't been
	defined previously).</p>

      <fixme author="ce">The reserved URI space needs to be
      consolidated and standardized.</fixme>
    </section>
    
    <section>
      <title>Dynamic URIs</title>

        <p>The dynamic URIs that are used for usecases are explained in the
        section <link href="usecases.html">Usecases</link>.
        </p>
      
    </section>
  </body> 
  <footer> 
    <legal>Â© 200 wyona.org</legal> 
  </footer>
</document>
