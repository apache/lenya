<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">

<document> 

<header> 
    <title>The DefaultFilePublisher Task</title>
    <version>0.1</version> 
    <type>Overview document</type> 
    <authors>
      <person name="Andreas Hartmann" email="andreas@apache.org"/> 
    </authors> 
</header> 
<body> 

<p>
The DefaultFilePublisher is a task that copies XML source files from
the authoring directory to another location, usually the live directory.
It needs the following parameters:
</p>
<ul>
 <li><strong>publication-id</strong>: the publication identifier</li>
 <li><strong>authoring-path</strong>: the authoring path</li>
 <li><strong>tree-authoring-path</strong>: the location of the <code>tree.xml</code> file</li>
 <li><strong>live-path</strong>: the live path</li>
 <li><strong>tree-live-path</strong>: the location of the <code>tree.xml</code> file</li>
 <li><strong>sources</strong>: a comma-separated list of files to publish</li>
</ul>
<p>
All paths are relative to the publication directory. Usually, the path information is read
from the <code>[publication-directory]/config/publishing/publisher.xconf</code> file:
</p>
<source><![CDATA[

<publication>
  <authoring>
    <documents href="content/authoring"/>
    <tree href="content/authoring/tree.xml"/>
  </authoring>
  <live>
    <documents href="content/live"/>
    <tree href="content/live/tree.xml"/>
  </live>
  ...
</publication>

]]></source>

<p>
You can override the paths in the task configuration file <code>tasks.xconf</code>,
e. g. to use several publishers to publish into different directories:
</p>

<source><![CDATA[

<tasks>

  <task id="publish-test" class="org.apache.lenya.cms.publishing.DefaultFilePublisher">
    <label>Publish</label>
    <parameter name="live-path" value="content/live-test"/>
    <parameter name="tree-live-path" value="content/live-test/tree.xml"/>
  </task>
  
  <task id="publish-real" class="org.apache.lenya.cms.publishing.DefaultFilePublisher">
    <label>Publish</label>
    <parameter name="live-path" value="content/live"/>
    <parameter name="tree-live-path" value="content/live/tree.xml"/>
  </task>

</tasks>

]]></source>
<p>
The remaining parameters, <code>publication-id</code> and <code>sources</code>, are
passed to the task as request parameters.
</p>
</body>
</document>