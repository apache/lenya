<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">

<document>
	<header>
		<title>Access Controllers</title>
		<version/>
		<type/>
		<authors>
			<person name="Andreas Hartmann" email="andreas@apache.org"/>
		</authors>
	</header>

  <body>
	
<section>
	<title>Introduction</title>
	<p>An access controller can be used to authenticate entities and to authorize
		requests.</p>
</section>
<section>
	<title>Defining the Role in lenya.roles</title>
	<source><![CDATA[<role name="org.apache.lenya.cms.ac2.AccessController"
    shorthand="access-controller"
    default-class="org.apache.lenya.cms.ac2.BypassableAccessController"/>]]></source>
</section>
			
<section>
	<title>Declaring an AccessController in cocoon.xconf</title>
	
	<p>
		Each AccessController component needs a type that is attached to the
		role attribute, separated with a slash (/). This allows you to choose an
		AccessController in your publication in combination with the
		Publication<link href="accesscontrollerresolvers.html">AccessControllerResolver</link>.
		The following example shows the declaration of an AccessController with
		the type <em>global</em>:
	</p>
	
	<source><![CDATA[<component logger="lenya.ac.accesscontroller.global"
    class="org.apache.lenya.cms.ac2.BypassableAccessController"
    role="org.apache.lenya.cms.ac2.AccessController/global">
    ...
</component>]]></source>

</section>

	<section>
		<title>Default Access Controller</title>
		<p>The DefaultAccessController combines an
			<link href="authenticators.html">Authenticator</link>, a set of
			<link href="authorizers.html">Authorizers</link>, an
			<link href="accreditablemanagers.html">AccreditableManager</link> and a
			<link href="policymanagers.html">PolicyManager</link> to perform these tasks.</p>
		<section>
			<title>Declaring an DefaultAccessController in cocoon.xconf</title>
			<p>
				The DefaultAccessController configuration includes the configuration
				of its sub-components, as you see in the following example:
			</p>
			<source><![CDATA[<component logger="lenya.ac.accesscontroller.global"
    class="org.apache.lenya.cms.ac2.DefaultAccessController"
    role="org.apache.lenya.cms.ac2.AccessController/global">
    
  <accreditable-manager type="file">
    <parameter name="directory"
        value="context:///lenya/config/ac/passwd"/>
  </accreditable-manager>
  
  <policy-manager type="file"/>
  
  <authorizer type="policy"/>
  <authorizer type="workflow"/>
  <authorizer type="usecase"/>
  
</component>]]></source>
		</section>
	</section>

<section>
	<title>Bypassable Access Controller</title>
	<p>The BypassableAccessController is a DefaultAccessController that can be
		bypassed for certain URL patterns. For URLs that match those patterns
		(regular expressions), access is granted for free.</p>
		
		<section>
			<title>Declaring an DefaultAccessController in cocoon.xconf</title>
			<p>
				In addition to the DefaultAccessController, the BypassableAccessController
				allows the definition of a regular expresssion for the public URL
				patterns:
			</p>
			<source><![CDATA[<component logger="lenya.ac.accesscontroller.global"
    class="org.apache.lenya.cms.ac2.BypassableAccessController"
    role="org.apache.lenya.cms.ac2.AccessController/global">
  ...
  <public>.*[.]css|.*[.]jpg|.*[.]gif</public>
</component>]]></source>
		</section>
</section>


  </body>
</document>
