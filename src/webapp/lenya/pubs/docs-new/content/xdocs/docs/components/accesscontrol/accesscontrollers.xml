<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">

<document>
	<header>
		<title>Access Controllers</title>
		<version/>
		<type/>
		<authors>
			<person name="Andreas Hartmann" email="andreas@apache.org"/>
		</authors>
	</header>

  <body>
	
<section>
	<title>Introduction</title>
	<p>An <em>AccessController</em> has the responsibility to authenticate
	  clients and to authorize requests.</p>
</section>
<section>
	<title>Defining the Role in lenya.roles</title>
	<source><![CDATA[<role name="org.apache.lenya.ac.AccessController"
    shorthand="access-controller"
    default-class="org.apache.lenya.ac.impl.BypassableAccessController"/>]]></source>
</section>

<section>
	<title>Declaring an AccessController in cocoon.xconf</title>
	
	<p>
		Each <em>AccessController</em> component needs a type that is attached to the
		<code>role</code> attribute, separated with a slash (/). This allows you to choose an
		<em>AccessController</em> in your publication in combination with the
		<em>Publication<link href="accesscontrollerresolvers.html">AccessControllerResolver</link></em>.
		The following example shows the declaration of an <em>AccessController</em> with
		the type <em>bypassable</em>:
	</p>
	
	<source><![CDATA[<component logger="lenya.ac.accesscontroller.bypassable"
    class="org.apache.lenya.ac.impl.BypassableAccessController"
    role="org.apache.lenya.ac.AccessController/bypassable">
    ...
</component>]]></source>

</section>

	<section>
		<title>Default Access Controller</title>
		<p>The <em>DefaultAccessController</em> combines an
			<link href="authenticators.html">Authenticator</link>, a set of
			<link href="authorizers.html">Authorizers</link>, an
			<link href="accreditablemanagers.html">AccreditableManager</link> and a
			<link href="policymanagers.html">PolicyManager</link> to perform these tasks.</p>
			<source><![CDATA[<component logger="lenya.ac.accesscontroller.default"
    class="org.apache.lenya.ac.impl.DefaultAccessController"
    role="org.apache.lenya.ac.AccessController/default"/>]]></source>
	</section>

<section>
	<title>Bypassable Access Controller</title>
	<p>The <em>BypassableAccessController</em> is a <em>DefaultAccessController</em> that can be
		bypassed for certain URL patterns. For URLs that match those patterns
		(regular expressions), access is granted for free.</p>
		
			<p>
				The <em>BypassableAccessController</em>
				allows the definition of a regular expression for the public URL
				patterns:
			</p>
			<source><![CDATA[<component logger="lenya.ac.accesscontroller.bypassable"
    class="org.apache.lenya.ac.impl.BypassableAccessController"
    role="org.apache.lenya.ac.AccessController/bypassable">
  <public>.*[.]css|.*[.]jpg|.*[.]gif</public>
</component>]]></source>
</section>


  </body>
</document>
