<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">

<document> 

<header> 
    <title>The StaticHTMLExporter Task</title>
    <version>0.1</version> 
    <type>Overview document</type> 
    <authors>
      <person name="Andreas Hartmann" email="andreas.hartmann@wyona.org"/> 
    </authors> 
</header> 
<body> 

<section><title>The StaticHTMLExporter Task</title> 
<p>
The StaticHTMLExporter is a task that downloads HTML pages from a server and
saves them as HTML files. It needs the following
parameters:
</p>
<ul>
 <li><strong>server-uri</strong>: the server uri, e. g. <code>http://authoring.yourdomain.com</code></li>
 <li><strong>server-port</strong>: the server port, e. g. 8080</li>
 <li><strong>publication-id</strong>: the publication id</li>
 <li><strong>export-path-prefix</strong>: the path to save the files to</li>
 <li><strong>uris</strong>: a comma-separated list of uris to download (without server + port)</li>
 <li><strong>substitute-regexp</strong>: a regular expression to substitute a part of the path</li>
</ul>
<p>
Usually, the path information is read
from the <code>[publication-directory]/docs/publication/publication.xconf</code> file:
</p>
<source><![CDATA[

<publication>
  ...
  <export>
    <destination href="resources/publication/export/pending"/>
    <substitution regexp="s/\/lenya\/unipublic//g"/>
  </export>
</publication>

]]></source>

<p>
You can override the paths in the task configuration file <code>tasks.xconf</code>,
e. g. to use several publishers to publish into different directories:
</p>

<source><![CDATA[

<tasks>

  <task id="export-pending" class="org.lenya.cms.publishing.StaticHTMLExporter">
    <parameter name="export-path" value="resources/publication/export/pending"/>
    <parameter name="substitute-regexp" value="s/\/lenya\/your-publication//g"/>
  </task>

  <task id="export-backup" class="org.lenya.cms.publishing.StaticHTMLExporter">
    <parameter name="export-path" value="resources/publication/backup"/>
    <parameter name="substitute-regexp" value="s/\/lenya\/your-publication//g"/>
  </task>

</tasks>

]]></source>

</section>
</body>
</document>