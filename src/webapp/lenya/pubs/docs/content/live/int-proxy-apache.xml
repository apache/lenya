<?xml version="1.0" encoding="UTF-8"?>

<document>
  <header>
    <title>Apache as Proxy</title>
    <version></version>
    <type></type>
    <authors>
      <person name="Michael Wechner" email="michael.wechner@wyona.org"/>
    </authors>
  </header>
  <body>
    <s1 title="Apache as Proxy">
      <s2 title="DNS Configuration">
      <br/>
        <source>
          <![CDATA[
chlorine.wyona.org.  IN A 194.191.122.217
calcium.wyona.org.   IN A 194.191.122.220
ethz-mat.wyona.com.  IN CNAME chlorine.wyona.com
unipublic.wyona.com. IN CNAME calcium.wyona.com
          ]]>
        </source>
      </s2>

      <s2 title="Build Apache with mod_proxy (or plus mod_rewrite)">
      <br/>  
	<source>
          <![CDATA[
./configure --prefix=/usr/local/apache --enable-module=proxy
(./configure --prefix=/usr/local/apache --enable-module=proxy --enable-module=rewrite)
          ]]>
        </source>
      </s2>

      <s2 title="httpd.conf">
      <br/>  
	<source>
          <![CDATA[
NameVirtualHost 195.226.6.70

<VirtualHost 195.226.6.70>
    ServerAdmin michael.wechner@wyona.org
#    DocumentRoot /usr/local/apache/htdocs/oscom
    ServerName oscom.wyona.org
    ProxyPass          / http://195.226.6.70:8080/wyona-cms/oscom/
    ProxyPassReverse   / http://195.226.6.70:8080/wyona-cms/oscom/
    ErrorLog logs/oscom.wyona.org-error_log
    CustomLog logs/oscom.wyona.org-access_log common
</VirtualHost>
          ]]>
        </source>
      </s2>

      <s2 title="More than one IP (not really necessary)">
      <br/>
      <ul>
      <li>Add IP:
        <source>
<![CDATA[
ifconfig eth0:0 194.191.122.217 broadcast 194.191.122.223 netmask 255.255.255.240 up
]]>
        </source></li>
      <li>Add another IP:
        <source>
          <![CDATA[
ifconfig eth0:1 194.191.122.219 broadcast 194.191.122.223 netmask 255.255.255.240 up
          ]]>
        </source></li>
      <li>Check Configuration:
        <source>
          <![CDATA[
ifconfig
ping 194.191.122.217
ping 194.191.122.219
          ]]>
        </source></li>
      <li>Remove IP:
        <source>
          <![CDATA[
ifconfig eth0:0 down
ifconfig eth0:0- 0
          ]]>
        </source></li>
      <li>Remove another IP:
        <source>
          <![CDATA[
ifconfig eth0:1 down
ifconfig eth0:1- 0
          ]]>
        </source></li>
      <li>Check Configuration:
        <source>
          <![CDATA[
ifconfig
ping 194.191.122.217
ping 194.191.122.219
	]]>
        </source></li>
	</ul>
      </s2>
    </s1>


<s1 title="Related Content">
<link href="http://www.riverdale.k12.or.us/linux/netadmin/network.html">Network Configuration</link>
</s1>
<!--

<h2>Apache configuration httpd.conf</h2>
<p>
<pre>
NameVirtualHost 194.191.122.220
#NameVirtualHost *

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for requests without a known
# server name.
&lt;VirtualHost 194.191.122.220&gt;
  ServerName calcium.wyona.org
  DocumentRoot /usr/local/apache/htdocs
&lt;/VirtualHost&gt;
&lt;VirtualHost 194.191.122.217&gt;
  ServerName ethz-mat.wyona.org
  ProxyPass / http://194.191.122.220:8080/wyona-cms/ethz-mat/
  ProxyPassReverse / http://194.191.122.220:8080/wyona-cms/ethz-mat/
&lt;/VirtualHost&gt;
&lt;VirtualHost 194.191.122.220&gt;
  ServerName unipublic.wyona.org
  ProxyPass / http://194.191.122.220:8080/wyona-cms/oscom/live/index.html
  ProxyPassReverse / http://194.191.122.220:8080/wyona-cms/oscom/live/index.html
&lt;/VirtualHost&gt;
</pre>
</p>

<h2>Wyona Configuration</h2>
<p>
<code>org/wyona/cms/cocoon/acting/AbstractAuthorizerAction.java</code><br>
<code>stylesheets/wyona/cms/ac/login-screen.xsl</code><br>
</p>

<h2>Related Content</h2>
<p>
<fork href="http://www.themorgue.org/linux/vhosts">Serving Zope Virtual Hosts using Apache</fork><br>
</p>
-->
</body>
</document>
