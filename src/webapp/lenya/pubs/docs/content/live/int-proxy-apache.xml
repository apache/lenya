<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">

<document>
  <header>
    <title>Apache as Proxy</title>
    <version/>
    <type/>
    <authors>
      <person name="Michael Wechner" email="michael.wechner@lenya.org"/>
    </authors>
  </header>
  <body>
    <section><title>Apache as Proxy</title>
      <section><title>DNS Configuration</title>
        <source><![CDATA[
          
chlorine.lenya.org.  IN A 194.191.122.217
calcium.lenya.org.   IN A 194.191.122.220
ethz-mat.lenya.com.  IN CNAME chlorine.lenya.com
unipublic.lenya.com. IN CNAME calcium.lenya.com
          
        ]]></source>
      </section>

      <section><title>Build Apache with mod_proxy (or plus mod_rewrite)</title> 
	<source><![CDATA[
          
./configure --prefix=/usr/local/apache --enable-module=proxy
(./configure --prefix=/usr/local/apache --enable-module=proxy --enable-module=rewrite)
          
        ]]></source>
      </section>

      <section><title>httpd.conf</title>
	<source><![CDATA[
          
NameVirtualHost 195.226.6.70

<VirtualHost 195.226.6.70>
    ServerAdmin michael.wechner@lenya.org
#    DocumentRoot /usr/local/apache/htdocs/oscom
    ServerName oscom.lenya.org
    ProxyPass          / http://195.226.6.70:8080/lenya/oscom/
    ProxyPassReverse   / http://195.226.6.70:8080/lenya/oscom/
    ErrorLog logs/oscom.lenya.org-error_log
    CustomLog logs/oscom.lenya.org-access_log common
</VirtualHost>
          
        ]]></source>
      </section>

      <section><title>More than one IP (not really necessary)</title>
      <ul>
      <li>Add IP:
        <code><![CDATA[

ifconfig eth0:0 194.191.122.217 broadcast 194.191.122.223 netmask 255.255.255.240 up

        ]]></code></li>
      <li>Add another IP:
        <code><![CDATA[
          
ifconfig eth0:1 194.191.122.219 broadcast 194.191.122.223 netmask 255.255.255.240 up
          
        ]]></code></li>
      <li>Check Configuration:
        <code><![CDATA[
          
ifconfig
ping 194.191.122.217
ping 194.191.122.219
          
        ]]></code></li>
      <li>Remove IP:
        <code><![CDATA[
          
ifconfig eth0:0 down
ifconfig eth0:0- 0
          
        ]]></code></li>
      <li>Remove another IP:
        <code><![CDATA[
          
ifconfig eth0:1 down
ifconfig eth0:1- 0
          
        ]]></code></li>
      <li>Check Configuration:
        <code><![CDATA[
          
ifconfig
ping 194.191.122.217
ping 194.191.122.219
	
        ]]></code></li>
	</ul>
      </section>
    </section>


<section><title>Related Content</title>
<p><link href="http://www.riverdale.k12.or.us/linux/netadmin/network.html">Network Configuration</link></p>
</section>

</body>
</document>