<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : tasks-publishingtask.xml
    Created on : November 13, 2002, 5:43 PM
    Author     : ah
    Description:
        Purpose of the document follows.
-->

<document> 

<header> 
    <title>The DefaultFilePublisher Task</title>
    <version>0.1</version> 
    <type>Overview document</type> 
    <authors>
      <person name="Andreas Hartmann" email="andreas.hartmann@wyona.org"/> 
    </authors> 
</header> 
<body> 

<s1 title="The DefaultFilePublisher Task"> 
<p>
The DefaultFilePublisher is a task that copies XML source files from
the authoring directory to another location, usually the live directory.
It needs the following parameters:
</p>
<ul>
 <li><code><strong>publication-id</strong></code>: the publication identifier</li>
 <li><code><strong>authoring-path</strong></code>: the authoring path</li>
 <li><code><strong>tree-authoring-path</strong></code>: the location of the <code>tree.xml</code> file</li>
 <li><code><strong>live-path</strong></code>: the live path</li>
 <li><code><strong>tree-live-path</strong></code>: the location of the <code>tree.xml</code> file</li>
 <li><code><strong>sources</strong></code>: a comma-separated list of files to publish</li>
</ul>
<p>
All paths are relative to the publication directory. Usually, the path information is read
from the <code>[publication-directory]/docs/publication/publication.xconf</code> file:
</p>
<source>
<![CDATA[
<publication>
  <authoring>
    <documents href="docs/publication/authoring"/>
    <tree href="docs/publication/authoring/tree.xml"/>
  </authoring>
  <live>
    <documents href="docs/publication/live"/>
    <tree href="docs/publication/live/tree.xml"/>
  </live>
  ...
</publication>
]]>
</source>

<p>
You can override the paths in the task configuration file <code>tasks.xconf</code>,
e. g. to use several publishers to publish into different directories:
</p>

<source>
<![CDATA[
<tasks>

  <task id="publish-test" class="org.wyona.cms.publishing.DefaultFilePublisher">
    <label>Publish</label>
    <parameter name="live-path" value="docs/publication/live-test"/>
    <parameter name="tree-live-path" value="docs/publication/live-test/tree.xml"/>
  </task>
  
  <task id="publish-real" class="org.wyona.cms.publishing.DefaultFilePublisher">
    <label>Publish</label>
    <parameter name="live-path" value="docs/publication/live"/>
    <parameter name="tree-live-path" value="docs/publication/live/tree.xml"/>
  </task>

</tasks>
]]>
</source>
<p>
The remaining parameters, <code>publication-id</code> and <code>sources</code>, are
passed to the task as request parameters.
</p>
</s1>
</body>
</document>
