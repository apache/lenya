<?xml version="1.0" encoding="UTF-8"?>

<document> 
  <header> 
	 <title>Proxy Generator</title>
	 <version>0.1</version> 
	 <type>Overview document</type> 
	 <authors>
           <person name="Michael Wechner" email="michael.wechner@wyona.org"/> 
	 </authors> 
  </header> 
  <body> 
   <s1 title="Introduction">
<p>
<figure src="images/ServletProxyGenerator.png" alt=""/>
</p>
    </s1>


   <s1 title="WebServiceProxyGenerator">
<p>
Ivelin Ivanov wrote the WebServiceProxyGenerator, which can be tested as a sample of Cocoon (2.1-dev):
http://localhost:8080/cocoon/samples/webserviceproxy/
</p>

<p>
More information can be found within the
<link href="http://marc.theaimsgroup.com/?l=xml-cocoon-dev&amp;w=2&amp;r=1&amp;s=WebServiceProxy&amp;q=b">mailing list archive</link>.
</p>

   <s2 title="Sitemap: Component"> 
    <p>
<source>
<![CDATA[
<map:components>
  <map:generators default="file">
    <map:generator name="wsproxy" src="org.apache.cocoon.generation.WebServiceProxyGenerator" logger="webapp.wsproxy"/>
  </map:generators>
</map:components>
]]>
</source>
    </p>
   </s2>

   <s2 title="Sitemap: Pipeline">
    <p>
<source>
<![CDATA[
<map:pipeline>
  <map:match pattern="*">
    <map:generate type="wsproxy" src="http://{header:host}/cocoon/samples/xmlform/wizard?cocoon-view=xml" label="xml"/>
    <map:transform src="stylesheets/newWizard2html.xsl" />
    <map:transform src="context://samples/stylesheets/xmlform/xmlform2html.xsl"/>
    <map:serialize type="html"/>
  </map:match>
</map:pipeline>
]]>
</source>
    </p>
   </s2>
   </s1>

   <s1 title="Wyona ProxyGenerator">
<p>
Before we were aware of Ivelin's WebServiceProxyGenerator we started to write our own. 
As soon as we realized that Ivelin's ProxyGenerator already existed within Cocoon, we tried
to use his Generator.
Unfortunately we are experiencing some problems with regard to session handling with Ivelin's WebServiceProxyGenerator.
The Wyona ProxyGenerator seems to be fine, at least for the purpose we need it.
The goal is to  locate the origin of the problems and hopefully merge our stuff with Ivelin's work.
</p>

<p>
Existing cookies are being forward. New cookies are not being forwarded.
</p>

   <s2 title="Sitemap: Component"> 
    <p>
<source>
<![CDATA[
<map:components>
  <map:generators default="file">
    <map:generator name="proxygen" src="org.wyona.cms.cocoon.generation.ProxyGenerator" logger="webapp.proxygen"/>
  </map:generators>
</map:components>
]]>
</source>
    </p>
   </s2>

   <s2 title="Sitemap: Pipeline">
    <p>
<source>
<![CDATA[
<map:pipeline>
  <map:match pattern="test-proxy-generator.xml">
    <map:generate type="proxygen" src="/wyona-cms/servlet/TestProxyGeneratorServlet"/>
<!--
    <map:generate type="proxygen" src="http://127.0.0.1:8080/wyona-cms/servlet/TestProxyGeneratorServlet"/>
-->
    <map:serialize type="xml"/>
  </map:match>
</map:pipeline>
]]>
</source>
    </p>
   </s2>
   </s1>

    <s1 title="Related Resources">
	<p>
	  <link href="http://nagoya.apache.org/gump/javadoc/jakarta-commons/httpclient/dist/docs/api/index.html">HttpClient API</link>
	</p>
	<p>
	  <link href="http://wp.netscape.com/newsref/std/cookie_spec.html">Http Cookies Spec</link>
	</p>
    </s1>
  </body>
</document>
