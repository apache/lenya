<?xml version="1.0"?>

<!-- CVS: $Id: sitemap.xmap,v 1.23 2002/11/03 23:04:45 michicms Exp $ -->

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Components ================================ -->

 <map:components>

  <map:generators default="file">

   <map:generator name="file"           logger="sitemap.generator.file"           label="content,data"
                  src="org.apache.cocoon.generation.FileGenerator"
                  pool-max="32" pool-min="16" pool-grow="4"/>

   <map:generator name="directory"      logger="sitemap.generator.directory"      label="content,data"
                  src="org.apache.cocoon.generation.DirectoryGenerator"/>

   <map:generator name="serverpages"    logger="sitemap.generator.serverpages"    label="content,data"
                  src="org.apache.cocoon.generation.ServerPagesGenerator"/>

   <map:generator  name="request"     src="org.apache.cocoon.generation.RequestGenerator"/>

   <map:generator  name="stream"     src="org.apache.cocoon.generation.StreamGenerator"/>

  </map:generators>

  <map:transformers default="xslt">

   <map:transformer name="xslt"            logger="sitemap.transformer.xslt"
                    src="org.apache.cocoon.transformation.TraxTransformer"
                    pool-max="32" pool-min="16" pool-grow="4">
    <use-request-parameters>false</use-request-parameters>
    <use-browser-capabilities-db>false</use-browser-capabilities-db>
    <use-deli>false</use-deli>
   </map:transformer>

   <map:transformer name="log"             logger="sitemap.transformer.log"
                    src="org.apache.cocoon.transformation.LogTransformer"/>

   <map:transformer name="xinclude"        logger="sitemap.transformer.xinclude"
                    src="org.apache.cocoon.transformation.XIncludeTransformer"/>

   <map:transformer name="cinclude"        logger="sitemap.transformer.cinclude"
                    src="org.apache.cocoon.transformation.CIncludeTransformer"/>

   <map:transformer name="writeDOMsession" logger="sitemap.transformer.writeDOMsession"
                    src="org.apache.cocoon.transformation.WriteDOMSessionTransformer"/>

   <map:transformer name="readDOMsession"  logger="sitemap.transformer.readDOMsession"
                    src="org.apache.cocoon.transformation.ReadDOMSessionTransformer"/>

  </map:transformers>

  <map:readers default="resource">

   <map:reader name="resource" logger="sitemap.reader.resource"
               src="org.apache.cocoon.reading.ResourceReader"/>

  </map:readers>

  <map:serializers default="html">

   <map:serializer name="xml"    mime-type="text/xml"         logger="sitemap.serializer.xml"
                   src="org.apache.cocoon.serialization.XMLSerializer"
                   pool-max="32" pool-min="16" pool-grow="4"/>

   <map:serializer name="html"   mime-type="text/html"        logger="sitemap.serializer.html"
                   src="org.apache.cocoon.serialization.HTMLSerializer">
      <encoding>ISO-8859-1</encoding>
   </map:serializer>
  </map:serializers>

  <map:matchers default="wildcard">

   <map:matcher name="wildcard"      logger="sitemap.matcher.wildcard"
                src="org.apache.cocoon.matching.WildcardURIMatcher"/>

   <map:matcher name="regexp"        logger="sitemap.matcher.regexp"
                src="org.apache.cocoon.matching.RegexpURIMatcher"/>

   <map:matcher name="request-parameter" logger="sitemap.matcher.request-parameter"
                src="org.apache.cocoon.matching.RequestParameterMatcher"/>

   <map:matcher name="sessionstate"  logger="sitemap.matcher.sessionstate"
                src="org.apache.cocoon.matching.WildcardSessionAttributeMatcher">
      <attribute-name>org.apache.cocoon.SessionState</attribute-name>
   </map:matcher>

   <map:matcher name="next-page"     logger="sitemap.matcher.next-page"
                src="org.apache.cocoon.matching.WildcardRequestParameterMatcher">
      <parameter-name>next-state</parameter-name>
   </map:matcher>

   <map:matcher name="referer-match" logger="sitemap.matcher.referer-match"
                src="org.apache.cocoon.matching.WildcardHeaderMatcher">
      <header-name>referer</header-name>
   </map:matcher>

  </map:matchers>

 </map:components>

 <map:pipelines>
   <map:pipeline>
<!-- Welcome to Wyona -->
     <map:match pattern="">
       <map:read src="resources/html/index.html" mime-type="text/html"/>
     </map:match>
     <map:match pattern="index.html">
       <map:read src="resources/html/index.html" mime-type="text/html"/>
     </map:match>

<!-- The Information Architect -->
     <map:match pattern="tia/**">
       <map:mount uri-prefix="tia" src="wyona/cms/pubs/tia/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- New Wyona Times -->
     <map:match pattern="nwt/**">
       <map:mount uri-prefix="nwt" src="wyona/cms/pubs/nwt/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Documentation -->
     <map:match pattern="docs/introduction.html">
       <map:read src="wyona/cms/pubs/wyona-cms-docs/resources/publication/html/introduction.html"/>
     </map:match>
     <map:match pattern="docs/authoring/**">
       <map:mount uri-prefix="docs/authoring" src="wyona/cms/pubs/wyona-cms-docs/authoring-sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>
     <map:match pattern="docs/**">
       <map:mount uri-prefix="docs" src="wyona/cms/pubs/wyona-cms-docs/live-sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Slides -->
     <map:match pattern="slides/**">
       <map:mount uri-prefix="slides" src="wyona/cms/pubs/slides/live-sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- OSCOM -->
     <map:match pattern="oscom/**">
       <map:mount uri-prefix="oscom" src="wyona/cms/pubs/oscom/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Discussion Forum -->
     <map:match pattern="forum/**">
       <map:mount uri-prefix="forum" src="wyona/cms/pubs/forum/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Unipublic -->
     <map:match pattern="unipublic/**">
       <map:mount uri-prefix="unipublic" src="wyona/cms/pubs/unipublic/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Materials Science -->
     <map:match pattern="ethz-mat/**">
       <map:mount uri-prefix="ethz-mat" src="wyona/cms/pubs/ethz-mat/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- wyona.org -->
     <map:match pattern="wyona.org/**">
       <map:mount uri-prefix="wyona.org" src="wyona/cms/pubs/wyona.org/live-sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Editor Xopus -->
     <map:match pattern="xopus/**">
       <map:mount uri-prefix="xopus" src="wyona/cms/xopus.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Editor Bitflux -->
     <map:match pattern="bitfluxeditor/**">
       <map:mount uri-prefix="bitfluxeditor" src="wyona/cms/bitfluxeditor.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- xopus.org -->
<!--
     <map:match pattern="xopus.org/**">
       <map:mount uri-prefix="xopus.org" src="wyona/cms/pubs/xopus.org/live-sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>
-->

<!-- Scratchpad -->
     <map:match pattern="scratchpad/**">
       <map:mount uri-prefix="scratchpad" src="wyona/cms/pubs/scratchpad/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Journal of Pattern Formation -->
<!--
     <map:match pattern="jpf/**">
       <map:mount uri-prefix="jpf" src="wyona/cms/pubs/jpf/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>
-->

<!-- Original Cocoon Sitemap (without SVG and FOP) -->
     <map:match pattern="**">
       <map:mount uri-prefix="" src="cocoon.xmap" check-reload="true" reload-method="synchron"/>
      </map:match>

   <map:handle-errors>
    <map:transform src="context://stylesheets/system/error2html.xsl"/>
    <map:serialize status-code="500"/>
   </map:handle-errors>
   </map:pipeline>
 </map:pipelines>
</map:sitemap>
