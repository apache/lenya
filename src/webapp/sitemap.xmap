<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Components ================================ -->

 <map:components>

  <map:generators default="file">
   <map:generator  name="file"        src="org.apache.cocoon.generation.FileGenerator" label="content"
                   pool-max="32" pool-min="16" pool-grow="4"/>
   <map:generator  name="serverpages" src="org.apache.cocoon.generation.ServerPagesGenerator" label="content"/>
   <!--<map:generator  name="directory"   src="org.wyona.cms.cocoon.generation.DirectoryGenerator" label="content"/>-->
   <map:generator  name="directory"   src="org.apache.cocoon.generation.DirectoryGenerator" label="content"/>
</map:generators>

  <map:transformers default="xslt">
   <map:transformer     name="xslt"      src="org.apache.cocoon.transformation.TraxTransformer"
                        pool-max="32" pool-min="16" pool-grow="4">
    <use-request-parameters>false</use-request-parameters>
    <use-browser-capabilities-db>false</use-browser-capabilities-db>
   </map:transformer>
   <map:transformer     name="writeDOMsession"  src="org.apache.cocoon.transformation.WriteDOMSessionTransformer"/>
   <map:transformer     name="readDOMsession"  src="org.apache.cocoon.transformation.ReadDOMSessionTransformer"/>
   <map:transformer     name="log"             logger="sitemap.transformer.log" src="org.apache.cocoon.transformation.LogTransformer"/>
   <map:transformer     name="xinclude"  src="org.apache.cocoon.transformation.XIncludeTransformer"/>
  </map:transformers>

  <map:readers default="resource">
   <map:reader name="resource"       src="org.apache.cocoon.reading.ResourceReader"/>
  </map:readers>

  <map:serializers default="html">
   <map:serializer name="xml"    mime-type="text/xml"         src="org.apache.cocoon.serialization.XMLSerializer" pool-max="32" pool-min="16" pool-grow="4"/>
   <map:serializer name="html"   mime-type="text/html"        src="org.apache.cocoon.serialization.HTMLSerializer"/>
  </map:serializers>

  <map:matchers default="wildcard">
   <map:matcher name="wildcard" src="org.apache.cocoon.matching.WildcardURIMatcher"/>
   <map:matcher name="regexp" src="org.apache.cocoon.matching.RegexpURIMatcher"/>
   <map:matcher name="request" src="org.apache.cocoon.matching.RequestParamMatcher"/>
   <map:matcher name="sessionstate" src="org.apache.cocoon.matching.WildcardSessionAttributeMatcher">
      <attribute-name>org.apache.cocoon.SessionState</attribute-name>
   </map:matcher>
   <map:matcher name="next-page" src="org.apache.cocoon.matching.WildcardParameterValueMatcher">
      <parameter-name>next-state</parameter-name>
   </map:matcher>
   <map:matcher name="referer-match" src="org.apache.cocoon.matching.WildcardHeaderMatcher">
      <header-name>referer</header-name>
   </map:matcher>
  </map:matchers>

<!--
  <map:actions>
   <map:action name="authorizer" src="org.wyona.cms.cocoon.acting.PMLAuthorizerAction">
     <authenticator id="global"/>
     <policies>policies/</policies>
     <public href="login-screen"/>
     <public href="do-login"/>
     <public href="switch-user"/>
     <public href="logout"/>
   </map:action>
   <map:action name="authenticator" src="org.wyona.cms.cocoon.acting.IMLAuthenticatorAction">
     <id>global</id>
     <passwd>passwd/</passwd>
   </map:action>
  </map:actions>
-->
 </map:components>

 <map:pipelines>
   <map:pipeline>
<!-- Welcome to Wyona -->
     <map:match pattern="">
       <map:read src="resources/html/index.html" mime-type="text/html"/>
     </map:match>
     <map:match pattern="index.html">
       <map:read src="resources/html/index.html" mime-type="text/html"/>
     </map:match>

<!-- The Information Architect -->
     <map:match pattern="tia/**">
       <map:mount uri-prefix="tia" src="wyona/cms/pubs/tia/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- New Wyona Times -->
     <map:match pattern="nwt/**">
       <map:mount uri-prefix="nwt" src="wyona/cms/pubs/nwt/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Documentation -->
     <map:match pattern="docs/**">
       <map:mount uri-prefix="docs" src="wyona/cms/pubs/docs/" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Materials Science -->
     <map:match pattern="ethz-mat/**">
       <map:mount uri-prefix="ethz-mat" src="wyona/cms/pubs/ethz-mat/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- Otego News -->
     <map:match pattern="otego-news/**">
       <map:mount uri-prefix="otego-news" src="wyona/cms/pubs/otego-news/sitemap.xmap" check-reload="true" reload-method="synchron"/>
     </map:match>

<!-- HTML Form Editor -->
<!--
         <map:match pattern="uni**">
          <map:mount uri-prefix="uni" src="uni/sitemap.xmap" check-reload="true" reload-method="synchron"/>
         </map:match>
-->

<!-- Original Cocoon Sitemap (without SVG and FOP) -->
     <map:match pattern="**">
       <map:mount uri-prefix="" src="sitemap.xmap.COCOON-WITHOUT-SVG-FOP" check-reload="true" reload-method="synchron"/>
      </map:match>
   </map:pipeline>
 </map:pipelines>
</map:sitemap>
