<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 1999-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!-- $Id: index.xml 55543 2004-10-26 00:14:59Z gregor $ -->

<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN" "http://forrest.apache.org/dtd/document-v20.dtd">

<document>
  <header>
    <title>Using Pictures How-To</title>
  </header>
    <body>
<p>Many site editors are wondering how it might be possible to add pictures to the pages of their publication. This is quite straigt forward if you know how, but 
there are some pitfalls that you might trap in for sure and probably never find out of yourself. </p>


<section><title id="head-52342aed3b11200e60c0a5637e3097bec839091c">The different places for pictures</title>

<p>In a standard Lenya publication there are two possible places where pictures might be found:  </p>
<ul>
<li><p>  In the <em>resources/shared/images</em> folder of you publication. </p>

</li>
<li><p>  In the content folder for a specific page. </p>
</li>
</ul>
<p>As <em>resources/shared</em> suggests these are pictures that might be needed in any of the pages and that change seldom, such as the coporate logo or navigational elements for example. </p>
<p>The pictures in the <em>resources/shared/images</em> folder cannot be uploaded by the content editor through the web browser but need to be put there by the administrator. They are referenced in the publication as {{ {$root}/images/name.ext}}, such as </p>

<source>
&lt;img src="{$root}/images/project-logo.png"/&gt;
</source>
<p>In many cases the content editor of the site will never have to deal with it as these images are often only referenced from the XSLT template that he or she should also not (have to) touch at all. </p>
<p>Pictures that are not global to the whole publication but belong to one page and therefore are subject to page editing are saved into the the folder that is named after the document id and holds the page as well. These pictures are called <em>Assets</em> in Lenya and can be uploaded by the editor. </p>

</section><section><title id="head-e0ff8e00b22f3c9fa49be90707f3874722f063b9">Prerequisite</title>

<p>In order to allow upload assets, compile Lenya with the parameter <strong>enable.uploads=true</strong> wich is found in <strong>build.properties</strong>: </p>

<source>
# Enable multipart requests (for security reasons turned off by default.
# Uncomment to enable)

enable.uploads=true
</source>
<p>This option is commented by default wich means it is <em>false</em>. As a Lenya user you cannot change this option, please make sure you recompile and re-install lenya with this option turned on before you continue. </p>
<p>If the option is off, we will be able to upload assets, but they will be discarded. The user does not receive a warning about that. </p>
<p><strong>Note:</strong> If the option is off, you might expect the Asset upload to be disabled or to get a warning message similar to the page you see when Kupu is not installed and you try to use the <em>Edit with Kupu</em> menu option. None of this. In case the parameter is off, you can happily upload pictures. You will not get any error messages, but your pictures will be written to <em>/dev/null</em>. <strong>Note for the non-Unix people:</strong> <em>They will be silently discarded.</em> </p>

</section><section><title id="head-543727d3f7ff5362456e9f90f91b773a29989b28">Uploading pictures</title>

<p>To upload pictures that belong to a page in your publication, go to that page in authoring mode. Then click on the <em>Site</em> tab. In that view you should find a tab called <em>Assets</em>. Click on that one to get a list of assets (= pictures or other files) that are available for this page. You can upload your files using the <em>New Asseet</em> Button.  </p>
<p>In the subsequent dialogue use the <em>Browse</em> button to locate a file on your local file system. You can enter a title for the asset which might be more descriptive that just the filename. But this title is used entirely for internal purposes. It will not be visible on the site later. (In other words: It will not become an <em>alt</em> attribute in the &lt;img .../&gt; tag; at least not automatically.) </p>

<p>After you have uploaded a file make sure if shows up in the list. </p>
<p><strong>Note for Windows users:</strong> <em>Sometimes the file name extensions for picture files on Windows are in uppercase such as PICT0034.JPG. If you choose a file named like this Lenya might complain it could only handle .jpg and refuses that file. Take it literally: Just change the name to PICT0034.jpg and it will work. You don't even have to rename the file itself, it's enough to change it in the upload dialogue.</em> </p>
<p>Once you have uploaded your pictures to the server they are available to be inserted into the page. </p>

</section><section><title id="head-e89353653618c83710b1579bc01c1fb69cd321b8">Linking pictures in a document</title>

<p>In order to link a picture that you have uploaded as an asset, you need to insert a relative link to <em>doc_id/filename.ext</em>. If for example you are editing the page <em>index</em> and you uploaded a picture called <em>building.png</em>, you would need to link to <em>index/building.png</em>. </p>

<p>This is also true for pages that are not directly under home, but anywhere in the hierarchy. If for example you need to link a picture called photo.jpg in <em>/products/enduser/product_a/overview_a</em> the link would still be <em>overview_a/photo.jpg</em>. </p>
<p>This remains true in any editor. In Kupu for example you can type this link directly into to the appropriate field and hit the "Insert Image" button beneath. You should see the image appear immediatelly inside the page you are editing. </p></section></body>
</document>