<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 1999-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!-- $Id$ -->

<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "document-v11.dtd">

<document>
  <header>
    <title>The PageEnvelopeModule</title>
    <version/>
    <type/>
    <authors>
      <person name="Lenya community" email="lenya-dev@cocoon.apache.org"/>
    </authors>
  </header>
  <body>

<section><title>Overview</title>
<p>
The <code>PageEnvelopeModule</code> is an <code>InputModule</code>
that provides access to the <code>PageEnvelope</code> parameters. For
documentation on input modules see section <link
href="http://cocoon.apache.org/2.1/userdocs/concepts/modules.html">Modules</link>
of the Cocoon documentation.
</p>
</section>
  
<section><title>Module Parameters</title>
<dl>
  <dt>publication-id</dt>
  <dd>The current publication ID.</dd>
  <dt>context-prefix</dt>
  <dd>The context prefix of the web application, e.g. <code>/lenya</code>.</dd>
  <dt>area</dt>
  <dd>The CMS area, <code>authoring</code> or <code>live</code>.</dd>
  <dt>publication</dt>
  <dd>The current publication</dd>
  <dt>document-id</dt>
  <dd>The document ID, i.e. the path of the document in the sitetree.</dd>
  <dt>document-name</dt>
  <dd>The document name, i.e. the very last part of the document ID.</dd>
  <dt>document-url</dt>
  <dd>The URL of the document within the area, e.g., <code>/news/index.html</code></dd>
  <dt>document-path</dt>
  <dd>The file path where this document is physically located in the
  file system.</dd>
  <dt>document-language</dt>
  <dd>The language of this document.</dd>
  <dt>document-type</dt>
  <dd>The document type.</dd>
</dl>
</section>

<section><title>Sitemap usage</title>
<source>
<![CDATA[<map:parameter name="document-id" value="{page-envelope:document-id}"/>]]>
</source>
</section>

<section><title>XSP usage</title>
<source>
<![CDATA[<xsp:page
       language="java"
       xmlns:xsp="http://apache.org/xsp"
       xmlns:input="http://apache.org/cocoon/xsp/input/1.0">

<usecase:url>
  <input:get-attribute
      module="page-envelope" as="string" name="document-url"/>
</usecase:url>
  
</xsp:page>       
]]>
</source>
</section>


  </body>
</document>
