<?xml version="1.0" encoding="UTF-8"?>
<!--
  /*
  * Copyright 2004-2005 The Apache Software Foundation or its licensors,
  *                     as applicable.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *      http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-->
<nodeTypes xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
  xmlns:rep="internal" xmlns:sv="http://www.jcp.org/jcr/sv/1.0"
  xmlns:lnt="http://apache.org/cocoon/lenya/jcr/nodetype/1.0"
  xmlns:lenya="http://apache.org/cocoon/lenya/jcr/1.0"
  xmlns:mix="http://www.jcp.org/jcr/mix/1.0"
  xmlns:xml="http://www.w3.org/XML/1998/namespace"
  xmlns:dc="http://purl.org/dc/elements/1.1"
  xmlns:dcterms="http://purl.org/dc/terms/">

  <!--
  General
  -->  
  <nodeType name="jcr:content" isMixin="false" hasOrderableChildNodes="false" primaryItemName="">
    <supertypes>
      <supertype>nt:resource</supertype>
    </supertypes>
  </nodeType>
  
  <nodeType name="lnt:mappable" isMixin="true">
    <propertyDefinition name="lnt:className" autoCreate="false" mandatory="true" onParentVersion="ABORT" protected="false"
      multiple="false" requiredType="String"/>
  </nodeType>

  <!--
  Publication root node
  -->  
  <nodeType name="lnt:publication" isMixin="false" hasOrderableChildNodes="false" primaryItemName="">
    <supertypes>
      <supertype>nt:hierarchyNode</supertype>
      <supertype>mix:referenceable</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <propertyDefinition name="lenya:id" autoCreate="false" mandatory="true" onParentVersion="ABORT" protected="false"
      multiple="false" requiredType="String"/>
    <childNodeDefinition name="lenya:content" defaultPrimaryType="lnt:content" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" sameNameSiblings="false">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:content</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="lenya:site" defaultPrimaryType="lnt:site" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" sameNameSiblings="false">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:site</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>
  
  <!--
    Root node for content subtree
  -->
  <nodeType name="lnt:content" isMixin="false" hasOrderableChildNodes="true" primaryItemName="">
    <supertypes>
      <supertype>nt:hierarchyNode</supertype>
      <supertype>mix:referenceable</supertype>
      <supertype>mix:lockable</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <childNodeDefinition name="lenya:contentNode" defaultPrimaryType="lnt:contentNode" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" sameNameSiblings="true">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:contentNode</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>
  
  
  <!-- node in content subtree -->
  <nodeType name="lnt:contentNode" isMixin="false" hasOrderableChildNodes="true" primaryItemName="">
    <supertypes>
      <supertype>nt:hierarchyNode</supertype>
      <supertype>mix:referenceable</supertype>
      <supertype>mix:lockable</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <propertyDefinition name="lenya:visibleInNav" requiredType="Boolean" autoCreate="true" mandatory="true"
      onParentVersion="ABORT" protected="false" multiple="false"/>
    <propertyDefinition name="lenya:href" requiredType="String" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" multiple="false"/>
    <propertyDefinition name="lenya:suffix" requiredType="String" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" multiple="false"/>
    <propertyDefinition name="lenya:documentType" requiredType="String" autoCreate="true" mandatory="true"
      onParentVersion="ABORT" protected="false" multiple="false"/>
    <childNodeDefinition name="lenya:document" defaultPrimaryType="lnt:document" autoCreate="false"
      mandatory="false" onParentVersion="ABORT" protected="false" sameNameSiblings="true">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:document</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>
  
  <!--
  document node in content subtree
  -->
  <nodeType name="lnt:document" isMixin="false" hasOrderableChildNodes="false" primaryItemName="">
    <supertypes>
      <supertype>nt:hierarchyNode</supertype>
      <supertype>mix:versionable</supertype>
      <supertype>mix:lockable</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <propertyDefinition name="xml:lang" requiredType="String" autoCreate="false" mandatory="true"
      onParentVersion="COPY" protected="false" multiple="false"/>
    <propertyDefinition name="lenya:label" requiredType="String" autoCreate="false" mandatory="true"
      onParentVersion="COPY" protected="false" multiple="false"/>
    <childNodeDefinition name="lenya:resource" defaultPrimaryType="lnt:resource" autoCreate="true" mandatory="true"
      onParentVersion="ABORT">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:resource</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="lenya:meta" defaultPrimaryType="lnt:meta" autoCreate="true" mandatory="false"
      onParentVersion="COPY" protected="false" sameNameSiblings="true">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:meta</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>
  
  <nodeType name="lnt:resource" isMixin="false" hasOrderableChildNodes="false" primaryItemName="">
    <supertypes>
      <supertype>nt:resource</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
  </nodeType>
  
  <!--
  meta data
  -->
  <nodeType name="lnt:meta" isMixin="false" hasOrderableChildNodes="false" primaryItemName="">
    <supertypes>
      <supertype>nt:unstructured</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <propertyDefinition name="lenya:elementSet" requiredType="String" autoCreate="false" mandatory="true"
      onParentVersion="ABORT" multiple="false" protected="false"/>
    <propertyDefinition name="*" requiredType="String" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" multiple="true" protected="false"/>
  </nodeType>
  
  <!--
  Root node for site subtree
  -->
  <nodeType name="lnt:site" isMixin="false" hasOrderableChildNodes="true" primaryItemName="">
    <supertypes>
      <supertype>nt:hierarchyNode</supertype>
      <supertype>mix:referenceable</supertype>
      <supertype>mix:lockable</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <childNodeDefinition name="*" defaultPrimaryType="lnt:siteNode" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" sameNameSiblings="false">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:siteNode</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>
  
  <!--
  Site structure node
  -->
  <nodeType name="lnt:siteNode" isMixin="false" hasOrderableChildNodes="true" primaryItemName="">
    <supertypes>
      <supertype>nt:hierarchyNode</supertype>
      <supertype>mix:referenceable</supertype>
      <supertype>mix:lockable</supertype>
      <supertype>lnt:mappable</supertype>
    </supertypes>
    <propertyDefinition name="lenya:document" mandatory="false" autoCreate="false" multiple="false" onParentVersion="ABORT"
      protected="false" requiredType="Reference"/>
    <childNodeDefinition name="*" defaultPrimaryType="lnt:siteNode" autoCreate="false" mandatory="false"
      onParentVersion="ABORT" protected="false" sameNameSiblings="false">
      <requiredPrimaryTypes>
        <requiredPrimaryType>lnt:siteNode</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>
  
</nodeTypes>
